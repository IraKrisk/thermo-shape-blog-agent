{
  "name": "searchUnsplash",
  "description": "Searches Unsplash for images matching a query and orientation. Returns image URL and alt text. Validates free license.",
  "color": "linear-gradient(rgb(157,28,152), rgb(243,101,87))",
  "iconSrc": "https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/unsplash.svg",
  "schema": "[{\"id\":0,\"property\":\"query\",\"description\":\"Search query to find images on Unsplash\",\"type\":\"string\",\"required\":true},{\"id\":1,\"property\":\"orientation\",\"description\":\"Image orientation: \\\"landscape\\\", \\\"portrait\\\", or \\\"squarish\\\"\",\"type\":\"string\",\"required\":true}]",
  "func": "const fetch = require('node-fetch');\nconst UNSPLASH_ACCESS_KEY = 'YOUR_UNSPLASH_ACCESS_KEY';\n\nasync function searchUnsplash(query, orientation) {\n    // Validate orientation\n    const validOrientations = ['landscape', 'portrait', 'squarish'];\n    if (!validOrientations.includes(orientation)) {\n        throw new Error(`Invalid orientation: ${orientation}. Must be: landscape, portrait, or squarish`);\n    }\n   \n    const url = `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=6&orientation=${orientation}`;\n   \n    const response = await fetch(url, {\n        headers: {\n            'Authorization': `Client-ID ${UNSPLASH_ACCESS_KEY}`,\n            'Accept-Version': 'v1'\n        }\n    });\n   \n    if (!response.ok) {\n        throw new Error(`Unsplash API error: ${response.status} - ${response.statusText}`);\n    }\n   \n    const data = await response.json();\n   \n    // Temporary debugging\n    return JSON.stringify(data.results[0], null, 2);\n   \n    if (!data.results || data.results.length === 0) {\n        return {\n            error: true,\n            message: `No images found for query: \"${query}\" with orientation: ${orientation}`\n        };\n    }\n   \n    // Skip first result (most overused), return next 5\n    const images = data.results.slice(1, 6).map(img => ({\n        url: img.urls.raw + '&q=80',\n        alt: img.alt_description || query,\n        description: img.description || img.alt_description || 'No description',\n        unsplash_id: img.id\n    }));\n   \n    return {\n        images: images,\n        query: query,\n        orientation: orientation\n    };\n}\n\n// Main execution\nconst searchQuery = $query;\nconst imageOrientation = $orientation;\n\ntry {\n    const result = await searchUnsplash(searchQuery, imageOrientation);\n    return JSON.stringify(result);\n} catch (error) {\n    return JSON.stringify({\n        error: true,\n        message: error.message\n    });\n}"
}