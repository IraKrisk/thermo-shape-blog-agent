{
  "nodes": [
    {
      "id": "startAgentflow_0",
      "type": "agentFlow",
      "position": {
        "x": -71.92324184153577,
        "y": 9.342562714392102
      },
      "data": {
        "id": "startAgentflow_0",
        "label": "Start",
        "version": 1.1,
        "name": "startAgentflow",
        "type": "Start",
        "color": "#7EE787",
        "hideInput": true,
        "baseClasses": [
          "Start"
        ],
        "category": "Agent Flows",
        "description": "Starting point of the agentflow",
        "inputParams": [
          {
            "label": "Input Type",
            "name": "startInputType",
            "type": "options",
            "options": [
              {
                "label": "Chat Input",
                "name": "chatInput",
                "description": "Start the conversation with chat input"
              },
              {
                "label": "Form Input",
                "name": "formInput",
                "description": "Start the workflow with form inputs"
              }
            ],
            "default": "chatInput",
            "id": "startAgentflow_0-input-startInputType-options",
            "display": true
          },
          {
            "label": "Form Title",
            "name": "formTitle",
            "type": "string",
            "placeholder": "Please Fill Out The Form",
            "show": {
              "startInputType": "formInput"
            },
            "id": "startAgentflow_0-input-formTitle-string",
            "display": false
          },
          {
            "label": "Form Description",
            "name": "formDescription",
            "type": "string",
            "placeholder": "Complete all fields below to continue",
            "show": {
              "startInputType": "formInput"
            },
            "id": "startAgentflow_0-input-formDescription-string",
            "display": false
          },
          {
            "label": "Form Input Types",
            "name": "formInputTypes",
            "description": "Specify the type of form input",
            "type": "array",
            "show": {
              "startInputType": "formInput"
            },
            "array": [
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Options",
                    "name": "options"
                  }
                ],
                "default": "string"
              },
              {
                "label": "Label",
                "name": "label",
                "type": "string",
                "placeholder": "Label for the input"
              },
              {
                "label": "Variable Name",
                "name": "name",
                "type": "string",
                "placeholder": "Variable name for the input (must be camel case)",
                "description": "Variable name must be camel case. For example: firstName, lastName, etc."
              },
              {
                "label": "Add Options",
                "name": "addOptions",
                "type": "array",
                "show": {
                  "formInputTypes[$index].type": "options"
                },
                "array": [
                  {
                    "label": "Option",
                    "name": "option",
                    "type": "string"
                  }
                ]
              }
            ],
            "id": "startAgentflow_0-input-formInputTypes-array",
            "display": false
          },
          {
            "label": "Ephemeral Memory",
            "name": "startEphemeralMemory",
            "type": "boolean",
            "description": "Start fresh for every execution without past chat history",
            "optional": true,
            "id": "startAgentflow_0-input-startEphemeralMemory-boolean",
            "display": true
          },
          {
            "label": "Flow State",
            "name": "startState",
            "description": "Runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string",
                "placeholder": "Foo"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "placeholder": "Bar",
                "optional": true
              }
            ],
            "id": "startAgentflow_0-input-startState-array",
            "display": true
          },
          {
            "label": "Persist State",
            "name": "startPersistState",
            "type": "boolean",
            "description": "Persist the state in the same session",
            "optional": true,
            "id": "startAgentflow_0-input-startPersistState-boolean",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "startInputType": "chatInput",
          "startEphemeralMemory": false,
          "startState": [
            {
              "key": "style_guide",
              "value": ""
            },
            {
              "key": "topic_options",
              "value": ""
            },
            {
              "key": "formatted_options",
              "value": ""
            },
            {
              "key": "topic",
              "value": ""
            },
            {
              "key": "title",
              "value": ""
            },
            {
              "key": "keyword",
              "value": ""
            },
            {
              "key": "keyword_url",
              "value": ""
            },
            {
              "key": "keyword_description",
              "value": ""
            },
            {
              "key": "draft",
              "value": ""
            },
            {
              "key": "content_critic",
              "value": ""
            },
            {
              "key": "language_critic",
              "value": ""
            },
            {
              "key": "blog_post",
              "value": ""
            },
            {
              "key": "human_feedback",
              "value": ""
            },
            {
              "key": "final_post",
              "value": ""
            },
            {
              "key": "banner_image",
              "value": ""
            },
            {
              "key": "bottom_image",
              "value": ""
            }
          ],
          "startPersistState": false
        },
        "outputAnchors": [
          {
            "id": "startAgentflow_0-output-startAgentflow",
            "label": "Start",
            "name": "startAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 103,
      "height": 66,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": -71.92324184153577,
        "y": 9.342562714392102
      }
    },
    {
      "id": "agentAgentflow_0",
      "position": {
        "x": 84.35907057954338,
        "y": -8.554924433214211
      },
      "data": {
        "id": "agentAgentflow_0",
        "label": "Researcher",
        "version": 3.2,
        "name": "agentAgentflow",
        "type": "Agent",
        "color": "#4DD0E1",
        "baseClasses": [
          "Agent"
        ],
        "category": "Agent Flows",
        "description": "Dynamically choose and utilize tools during runtime, enabling multi-step reasoning",
        "inputParams": [
          {
            "label": "Model",
            "name": "agentModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "agentAgentflow_0-input-agentModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "agentMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "agentAgentflow_0-input-agentMessages-array",
            "display": true
          },
          {
            "label": "OpenAI Built-in Tools",
            "name": "agentToolsBuiltInOpenAI",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "Web Search",
                "name": "web_search_preview",
                "description": "Search the web for the latest information"
              },
              {
                "label": "Code Interpreter",
                "name": "code_interpreter",
                "description": "Write and run Python code in a sandboxed environment"
              },
              {
                "label": "Image Generation",
                "name": "image_generation",
                "description": "Generate images based on a text prompt"
              }
            ],
            "show": {
              "agentModel": "chatOpenAI"
            },
            "id": "agentAgentflow_0-input-agentToolsBuiltInOpenAI-multiOptions",
            "display": true
          },
          {
            "label": "Gemini Built-in Tools",
            "name": "agentToolsBuiltInGemini",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "URL Context",
                "name": "urlContext",
                "description": "Extract content from given URLs"
              },
              {
                "label": "Google Search",
                "name": "googleSearch",
                "description": "Search real-time web content"
              },
              {
                "label": "Code Execution",
                "name": "codeExecution",
                "description": "Write and run Python code in a sandboxed environment"
              }
            ],
            "show": {
              "agentModel": "chatGoogleGenerativeAI"
            },
            "id": "agentAgentflow_0-input-agentToolsBuiltInGemini-multiOptions",
            "display": false
          },
          {
            "label": "Anthropic Built-in Tools",
            "name": "agentToolsBuiltInAnthropic",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "Web Search",
                "name": "web_search_20250305",
                "description": "Search the web for the latest information"
              },
              {
                "label": "Web Fetch",
                "name": "web_fetch_20250910",
                "description": "Retrieve full content from specified web pages"
              }
            ],
            "show": {
              "agentModel": "chatAnthropic"
            },
            "id": "agentAgentflow_0-input-agentToolsBuiltInAnthropic-multiOptions",
            "display": false
          },
          {
            "label": "Tools",
            "name": "agentTools",
            "type": "array",
            "optional": true,
            "array": [
              {
                "label": "Tool",
                "name": "agentSelectedTool",
                "type": "asyncOptions",
                "loadMethod": "listTools",
                "loadConfig": true
              },
              {
                "label": "Require Human Input",
                "name": "agentSelectedToolRequiresHumanInput",
                "type": "boolean",
                "optional": true
              }
            ],
            "id": "agentAgentflow_0-input-agentTools-array",
            "display": true
          },
          {
            "label": "Knowledge (Document Stores)",
            "name": "agentKnowledgeDocumentStores",
            "type": "array",
            "description": "Give your agent context about different document sources. Document stores must be upserted in advance.",
            "array": [
              {
                "label": "Document Store",
                "name": "documentStore",
                "type": "asyncOptions",
                "loadMethod": "listStores"
              },
              {
                "label": "Describe Knowledge",
                "name": "docStoreDescription",
                "type": "string",
                "generateDocStoreDescription": true,
                "placeholder": "Describe what the knowledge base is about, this is useful for the AI to know when and how to search for correct information",
                "rows": 4
              },
              {
                "label": "Return Source Documents",
                "name": "returnSourceDocuments",
                "type": "boolean",
                "optional": true
              }
            ],
            "optional": true,
            "id": "agentAgentflow_0-input-agentKnowledgeDocumentStores-array",
            "display": true
          },
          {
            "label": "Knowledge (Vector Embeddings)",
            "name": "agentKnowledgeVSEmbeddings",
            "type": "array",
            "description": "Give your agent context about different document sources from existing vector stores and embeddings",
            "array": [
              {
                "label": "Vector Store",
                "name": "vectorStore",
                "type": "asyncOptions",
                "loadMethod": "listVectorStores",
                "loadConfig": true
              },
              {
                "label": "Embedding Model",
                "name": "embeddingModel",
                "type": "asyncOptions",
                "loadMethod": "listEmbeddings",
                "loadConfig": true
              },
              {
                "label": "Knowledge Name",
                "name": "knowledgeName",
                "type": "string",
                "placeholder": "A short name for the knowledge base, this is useful for the AI to know when and how to search for correct information"
              },
              {
                "label": "Describe Knowledge",
                "name": "knowledgeDescription",
                "type": "string",
                "placeholder": "Describe what the knowledge base is about, this is useful for the AI to know when and how to search for correct information",
                "rows": 4
              },
              {
                "label": "Return Source Documents",
                "name": "returnSourceDocuments",
                "type": "boolean",
                "optional": true
              }
            ],
            "optional": true,
            "id": "agentAgentflow_0-input-agentKnowledgeVSEmbeddings-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "agentEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "agentAgentflow_0-input-agentEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "agentMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "agentEnableMemory": true
            },
            "id": "agentAgentflow_0-input-agentMemoryType-options",
            "display": true
          },
          {
            "label": "Window Size",
            "name": "agentMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "agentMemoryType": "windowSize"
            },
            "id": "agentAgentflow_0-input-agentMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "agentMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "agentMemoryType": "conversationSummaryBuffer"
            },
            "id": "agentAgentflow_0-input-agentMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "agentUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "agentEnableMemory": true
            },
            "id": "agentAgentflow_0-input-agentUserMessage-string",
            "display": true
          },
          {
            "label": "Return Response As",
            "name": "agentReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "agentAgentflow_0-input-agentReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "agentStructuredOutput",
            "description": "Instruct the Agent to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "agentStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "agentStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "agentAgentflow_0-input-agentStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "agentUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "agentAgentflow_0-input-agentUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "agentModel": "chatOpenAI",
          "agentMessages": [
            {
              "role": "system",
              "content": "<p>You are a content analysis system. Your ONLY task is to analyse blog posts and output a comprehensive guide in English.</p><p>PROCESS:</p><p>1. Use web scraper tool to fetch all URLs from user message</p><p>2. Read all blog content thoroughly</p><p>3. Extract the patterns listed below</p><p>4. Output ONLY a detailed narrative guide - NO greetings, NO questions, NO conversation</p><p>DO NOT respond conversationally. DO NOT ask \"how can I help\". ONLY output the analysis guide.</p><p>CRITICAL INSTRUCTION - PARAGRAPH ANALYSIS:</p><p>When analysing the HTML, you will see many &lt;p&gt; tags with only 1-2 sentences each. This is a VISUAL FORMATTING CHOICE, not semantic structure.</p><p>Your task: Identify the SEMANTIC paragraph patterns by grouping related ideas together. Look for:</p><p>- Complete units of thought/idea</p><p>- How many sentences form a logical idea unit</p><p>- Natural progression within semantic paragraphs</p><p>- Where true paragraph breaks occur (shift in topic/idea)</p><p>Do NOT report \"paragraphs are 1-2 sentences\" - that's visual formatting.</p><p>DO report the semantic structure: \"semantic paragraphs are typically 3-6 sentences, forming complete thought units\"</p><p>---</p><p>Extract these patterns:</p><p>1. <strong>Title Characteristics:</strong></p><p>- Direct personal address usage</p><p>- Specific emotional/physical states vs. abstract concepts</p><p>- Conversational tone patterns</p><p>- Length and detail approach</p><p>- Concrete scenarios vs. generic wellness topics</p><p>- What makes titles authentic</p><p>2. <strong>Writing Voice/Tone:</strong></p><p>- First-person confessional style</p><p>- Vulnerability and relatability patterns</p><p>- Conversational, friend-to-friend tone</p><p>- Natural spoken Croatian characteristics</p><p>3. <strong>Topic Themes:</strong></p><p>Extract wellness/lifestyle themes that resonate with Thermo Shape audience. Examples from existing posts include self-awareness and body listening, daily wellness rituals, rest and recovery, mental health and stress, self-care without guilt, slowing down and mindful living, feminine wellness perspectives. Identify the common thread and approach - not restricted to these exact topics, but similar wellness angles that fit the brand positioning.</p><p>4. <strong>Topic Alignment:</strong></p><p>- Which wellness angles naturally fit Thermo Shape business</p><p>- How topics connect to solutions the business provides</p><p>- Recovery, body awareness, gentle movement themes</p><p>5. <strong>Content Structure:</strong></p><p>- Opening format (confession/story patterns)</p><p>- Section organization (how many H2 sections typically)</p><p>- Semantic paragraph structure (idea units, not visual breaks)</p><p>- How many semantic paragraphs per section</p><p>- Conclusion patterns</p><p>- Signature format</p><p>- Total content length patterns</p><p>6. <strong>Semantic Paragraph Patterns - CRITICAL:</strong></p><p>Analyse the LOGICAL structure:</p><p>- How many sentences form a complete idea unit?</p><p>- How are related thoughts grouped?</p><p>- Where do true semantic breaks occur?</p><p>- What is the natural flow within semantic paragraphs?</p><p>Ignore the &lt;p&gt; tag count - focus on idea units.</p><p>7. <strong>Sentence Structure:</strong></p><p>- Sentence length variety</p><p>- Rhythm and flow</p><p>- Balance of simple vs. complex sentences</p><p>8. <strong>Emotional Approach:</strong></p><p>- Which struggles resonate with readers</p><p>- How problems are framed</p><p>- Empowerment approach without pressure</p><p>9. <strong>Product Integration:</strong></p><p>- When and how products appear throughout content</p><p>- Phrasing and framing style (varied, not repetitive)</p><p>- Positioning (tool vs. promotion)</p><p>- Natural integration in context</p><p>10. <strong>SEO Keywords:</strong></p><p>- Natural Croatian wellness vocabulary</p><p>- How keywords appear organically in content</p><p>11. <strong>Topic Generation Framework:</strong></p><p>- How to identify fitting wellness angles</p><p>- What makes topics similar to successful posts</p><p>- Pattern recognition for topic creation</p><p>12. <strong>Topics Already Covered:</strong></p><p>List the specific topics/themes already written about in the analysed posts, so new content avoids duplication.</p><p>---</p><p>Create a comprehensive narrative guide explaining these patterns.</p><p>CRITICAL: Output only the analysis guide. Nothing else.</p>"
            },
            {
              "role": "user",
              "content": "<p>Read these blog posts carefully and extract comprehensive patterns:</p><p>Blog examples:</p><p>- https://thermoshape.hr/jutarnje-navike-koje-mijenjaju-dan/</p><p>- https://thermoshape.hr/dan-samo-za-sebe/<br><br>- https://thermoshape.hr/umorna-a-ne-znas-zasto-mozda-ti-ne-treba-odmor-nego-promjena-ritma/</p><p>- https://thermoshape.hr/tvoje-tijelo-ne-trazi-savrsenstvo-trazi-signal-da-ga-slusas/<br><br></p><p>Product context:</p><p>- https://thermoshape.hr</p><p>- https://thermoshape.hr/vakuumfitness/</p><p>- https://thermoshape.hr/wellness-spa/</p><p><br><br>Business context:</p><p>- https://thermoshape.hr/</p><p>- https://thermoshape.hr/partnerstvo/</p><p></p>"
            }
          ],
          "agentTools": [
            {
              "agentSelectedTool": "webScraperTool",
              "agentSelectedToolRequiresHumanInput": "",
              "agentSelectedToolConfig": {
                "scrapeMode": "recursive",
                "maxDepth": "0",
                "maxPages": "10",
                "timeoutS": 60,
                "description": "",
                "agentSelectedTool": "webScraperTool"
              }
            }
          ],
          "agentKnowledgeDocumentStores": "",
          "agentKnowledgeVSEmbeddings": "",
          "agentEnableMemory": true,
          "agentMemoryType": "allMessages",
          "agentUserMessage": "",
          "agentReturnResponseAs": "assistantMessage",
          "agentStructuredOutput": [],
          "agentUpdateState": [
            {
              "key": "style_guide",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "agentModelConfig": {
            "credential": "",
            "modelName": "gpt-5.2",
            "temperature": "0.7",
            "streaming": true,
            "maxTokens": "",
            "topP": "",
            "frequencyPenalty": "",
            "presencePenalty": "",
            "timeout": "",
            "strictToolCalling": "",
            "stopSequence": "",
            "basepath": "",
            "proxyUrl": "",
            "baseOptions": "",
            "allowImageUploads": "",
            "reasoning": "",
            "agentModel": "chatOpenAI"
          }
        },
        "outputAnchors": [
          {
            "id": "agentAgentflow_0-output-agentAgentflow",
            "label": "Agent",
            "name": "agentAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 150,
      "height": 100,
      "selected": false,
      "positionAbsolute": {
        "x": 84.35907057954338,
        "y": -8.554924433214211
      },
      "dragging": false
    },
    {
      "id": "llmAgentflow_0",
      "position": {
        "x": -176.99327700404973,
        "y": 140.069564953783
      },
      "data": {
        "id": "llmAgentflow_0",
        "label": "Topic & Title Analyser",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_0-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_0-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_0-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_0-input-llmMemoryType-options",
            "display": true
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_0-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_0-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_0-input-llmUserMessage-string",
            "display": true
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_0-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_0-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_0-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatAnthropic",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>CRITICAL INSTRUCTIONS:</p><p>DIVERSITY REQUIREMENT:</p><p>Review the conversation history. If you previously generated topic options, DO NOT repeat those same themes. Generate completely different combinations each time. Do NOT repeat the same topic angles from previous generations.</p><p>Mix and vary your approaches - do not default to the same 5 themes.</p><p>Be creative with how you combine and express the unexplored angles.</p><p>OUTPUT FORMAT:</p><p>Use ONLY the structured output schema.</p><p>DO NOT write topic options as conversational text.</p><p>DO NOT output JSON in your response text (no {\"topic_options\": ...}).</p><p>The array goes DIRECTLY into the topic_options field automatically.</p><p>YOU MUST GENERATE EXACTLY 5 OPTIONS. Count: 1, 2, 3, 4, 5.</p><p>LANGUAGE REQUIREMENT:</p><p>ALL output must be 100% Croatian language - topics AND titles. No English words in output.</p><p>---</p><p>You are generating personal reflection topics for Ari's confessional blog.</p><p>Generate vulnerable, personal reflections on life struggles and moments - confessional blog topics where Ari shares relatable emotions and situations.</p><p>---</p><p>PERSONAL REFLECTION ANGLES (Choose 5 DIFFERENT ones):</p><p>Select from these personal life situations and emotional struggles.</p><p>These are conceptual themes - interpret their meaning and express naturally in Croatian:</p><p>Forgiving others but not yourself, self-care without guilt,self-awareness body listening, rest and recovery, mental health and stress, slowing down and mindful living, feeling pressure to be perfect, giving more to others than yourself, hiding exhaustion behind productivity, guilt about resting, comparing yourself to others, ignoring body signals, pushing through when you should stop, feeling lost in daily rush, disconnection from your own needs, fear of disappointing others, perfectionism cycles, losing yourself in roles, suppressing emotions, pretending everything is fine, inner critic that never quiets, feeling selfish for self-care, body as enemy vs ally, chasing impossible standards, ignoring intuition, living for external validation, numbing instead of feeling, fear of slowing down, shame about needs, breaking own promises, trust issues with your body, hiding vulnerability, performing instead of being, sacrificing yourself repeatedly, forgetting what brings joy, running from yourself, resistance to gentleness, self-judgment loops, emotional exhaustion masked as busy, needing permission to rest, carrying everyone else's emotions, shrinking yourself for others, apologizing for existing, overthinking everything, waiting for perfect moment, punishing yourself with thoughts, disconnection from pleasure, fear of being selfish, chronic self-doubt, people-pleasing patterns, ignoring your limits, performing happiness, competing with yourself, harsh self-standards.</p><p>SELECTION STRATEGY:</p><p>- Choose 5 angles from DIFFERENT parts of this list (beginning, middle, end)</p><p>- Ensure maximum variety across all 5 options</p><p>- Do not cluster on similar emotional themes</p><p>- Mix different types of struggles (perfectionism, rest, relationships, self-judgment, etc.)</p><p>AVOID THESE SPECIFIC THEMES:</p><p>Do not generate variations of: jutarnje navike, odmor, umor, slušanje tijela, promjena ritma.</p><p>---</p><p>TOPIC REQUIREMENTS:</p><p>Write each topic in Croatian.</p><p>Each topic must:</p><p>- Be specific personal struggle/moment (not abstract concept)</p><p>- Fit personal confessional blog voice (vulnerable, relatable)</p><p>- Connect to Thermo Shape audience context (women's experiences)</p><p>- Express the concept naturally, not translate literally from English</p><p>---</p><p>TITLE REQUIREMENTS:</p><p>Write each title in Croatian.</p><p>Each title must:</p><p>- Use direct personal address (tvoje, ti, te)</p><p>- Describe specific emotional/physical state (not abstract concepts)</p><p>- Sound like natural spoken Croatian</p><p>- Be authentic personal scenario (not generic statement)</p><p>- Primarily use STATEMENTS (direct, declarative)</p><p>- If using a question, include the question mark</p><p>STRICTLY FORBIDDEN  PATTERNS:</p><p>- Dashes \" - \" (obvious AI marker)</p><p>- Starting with \"Kako...\"</p><p>- \"Evo kako...\"</p><p>- \"Otkrij kako...\"</p><p>- \"Savjeti za...\", \"Tehnike za...\", \"[Number] načina...\"</p><p>- \"Zaboravi [X]\", \"Ne zaboravi...\"</p><p>- \"Tvoj put do...\"</p><p>- \"Kako prihvatiti...\", \"Kako biti...\", \"Kako se nositi...\"</p><p>- Exclamation marks</p><p>- Imperative commands without context</p><p>- Instructional \"how-to\" framing</p><p>- Abstract concepts (mir, sklad, balans) as main subject</p><p>TITLE PRINCIPLES:</p><p>- Specific scenario over generic statement</p><p>- Personal physical/emotional state mentioned directly</p><p>- No question word structures as title starters</p><p>- Conversational detail valued</p><p>- Natural spoken language</p><p>---</p><p>QUALITY CHECK:</p><p>Before finalizing output, verify:</p><p>- Grammar is natural and accurate</p><p>- Phrasing sounds like native speaker</p><p>- No awkward translations or AI-sounding constructions</p><p>- Titles flow naturally when read aloud</p><p>- Topics express concepts authentically</p><p>---</p><p>INTERNAL DIVERSITY CHECK:</p><p>Before submitting, verify your 5 options:</p><p>✓ Are all 5 topics exploring DIFFERENT personal struggles/moments?</p><p>✓ Did I select from different parts of the concept list (not clustering)?</p><p>✓ Did I avoid ALL forbidden title patterns?</p><p>✓ Do titles sound authentic and specific?</p><p>✓ Did I avoid the specific themes listed?</p><p>---</p><p>FINAL CHECK:</p><p>- Generated EXACTLY 5 options? (Count: 1, 2, 3, 4, 5)</p><p>- All topics in Croatian?</p><p>- All titles in Croatian?</p><p>- All 5 topics are DIFFERENT themes?</p>"
            },
            {
              "role": "user",
              "content": "<p>Generate new blog topic options that fit Thermo Shape's content patterns.</p>"
            }
          ],
          "llmEnableMemory": true,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": [
            {
              "key": "topic_options",
              "type": "stringArray",
              "enumValues": "",
              "jsonSchema": "",
              "description": "Array of exactly 5 wellness topic options, each with topic and 3 title variations"
            }
          ],
          "llmUpdateState": [
            {
              "key": "topic_options",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output.topic_options\" data-label=\"output.topic_options\">{{ output.topic_options }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "credential": "",
            "modelName": "claude-sonnet-4-5",
            "temperature": "0.9",
            "streaming": true,
            "maxTokensToSample": "",
            "topP": "",
            "topK": "",
            "extendedThinking": false,
            "budgetTokens": 1024,
            "allowImageUploads": "",
            "llmModel": "chatAnthropic"
          }
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_0-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 213,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": -176.99327700404973,
        "y": 140.069564953783
      },
      "dragging": false
    },
    {
      "id": "humanInputAgentflow_0",
      "position": {
        "x": 360.43513650122736,
        "y": 136.0565027124042
      },
      "data": {
        "id": "humanInputAgentflow_0",
        "label": "Select Topic & Title",
        "version": 1,
        "name": "humanInputAgentflow",
        "type": "HumanInput",
        "color": "#6E6EFD",
        "baseClasses": [
          "HumanInput"
        ],
        "category": "Agent Flows",
        "description": "Request human input, approval or rejection during execution",
        "inputParams": [
          {
            "label": "Description Type",
            "name": "humanInputDescriptionType",
            "type": "options",
            "options": [
              {
                "label": "Fixed",
                "name": "fixed",
                "description": "Specify a fixed description"
              },
              {
                "label": "Dynamic",
                "name": "dynamic",
                "description": "Use LLM to generate a description"
              }
            ],
            "id": "humanInputAgentflow_0-input-humanInputDescriptionType-options",
            "display": true
          },
          {
            "label": "Description",
            "name": "humanInputDescription",
            "type": "string",
            "placeholder": "Are you sure you want to proceed?",
            "acceptVariable": true,
            "rows": 4,
            "show": {
              "humanInputDescriptionType": "fixed"
            },
            "id": "humanInputAgentflow_0-input-humanInputDescription-string",
            "display": true
          },
          {
            "label": "Model",
            "name": "humanInputModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "show": {
              "humanInputDescriptionType": "dynamic"
            },
            "id": "humanInputAgentflow_0-input-humanInputModel-asyncOptions",
            "display": false
          },
          {
            "label": "Prompt",
            "name": "humanInputModelPrompt",
            "type": "string",
            "default": "<p>Summarize the conversation between the user and the assistant, reiterate the last message from the assistant, and ask if user would like to proceed or if they have any feedback. </p>\n<ul>\n<li>Begin by capturing the key points of the conversation, ensuring that you reflect the main ideas and themes discussed.</li>\n<li>Then, clearly reproduce the last message sent by the assistant to maintain continuity. Make sure the whole message is reproduced.</li>\n<li>Finally, ask the user if they would like to proceed, or provide any feedback on the last assistant message</li>\n</ul>\n<h2 id=\"output-format-the-output-should-be-structured-in-three-parts-\">Output Format The output should be structured in three parts in text:</h2>\n<ul>\n<li>A summary of the conversation (1-3 sentences).</li>\n<li>The last assistant message (exactly as it appeared).</li>\n<li>Ask the user if they would like to proceed, or provide any feedback on last assistant message. No other explanation and elaboration is needed.</li>\n</ul>\n",
            "acceptVariable": true,
            "generateInstruction": true,
            "rows": 4,
            "show": {
              "humanInputDescriptionType": "dynamic"
            },
            "id": "humanInputAgentflow_0-input-humanInputModelPrompt-string",
            "display": false
          },
          {
            "label": "Enable Feedback",
            "name": "humanInputEnableFeedback",
            "type": "boolean",
            "default": true,
            "id": "humanInputAgentflow_0-input-humanInputEnableFeedback-boolean",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "humanInputDescriptionType": "fixed",
          "humanInputDescription": "<p>Choose an option in format: \"4-2\" for topic option 4, title 2</p>",
          "humanInputEnableFeedback": true,
          "undefined": ""
        },
        "outputAnchors": [
          {
            "id": "humanInputAgentflow_0-output-0",
            "label": "Human Input",
            "name": "humanInputAgentflow"
          },
          {
            "id": "humanInputAgentflow_0-output-1",
            "label": "Human Input",
            "name": "humanInputAgentflow"
          }
        ],
        "outputs": {
          "humanInputAgentflow": ""
        },
        "selected": false
      },
      "type": "agentFlow",
      "width": 196,
      "height": 80,
      "selected": false,
      "positionAbsolute": {
        "x": 360.43513650122736,
        "y": 136.0565027124042
      },
      "dragging": false
    },
    {
      "id": "loopAgentflow_0",
      "position": {
        "x": -178.36586434558419,
        "y": 269.22835270143435
      },
      "data": {
        "id": "loopAgentflow_0",
        "label": "Back to Topic & Title Analyser",
        "version": 1.2,
        "name": "loopAgentflow",
        "type": "Loop",
        "color": "#FFA07A",
        "hideOutput": true,
        "baseClasses": [
          "Loop"
        ],
        "category": "Agent Flows",
        "description": "Loop back to a previous node",
        "inputParams": [
          {
            "label": "Loop Back To",
            "name": "loopBackToNode",
            "type": "asyncOptions",
            "loadMethod": "listPreviousNodes",
            "freeSolo": true,
            "id": "loopAgentflow_0-input-loopBackToNode-asyncOptions",
            "display": true
          },
          {
            "label": "Max Loop Count",
            "name": "maxLoopCount",
            "type": "number",
            "default": 5,
            "id": "loopAgentflow_0-input-maxLoopCount-number",
            "display": true
          },
          {
            "label": "Fallback Message",
            "name": "fallbackMessage",
            "type": "string",
            "description": "Message to display if the loop count is exceeded",
            "placeholder": "Enter your fallback message here",
            "rows": 4,
            "acceptVariable": true,
            "optional": true,
            "id": "loopAgentflow_0-input-fallbackMessage-string",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "loopUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "loopAgentflow_0-input-loopUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "loopBackToNode": "llmAgentflow_0-Topic & Title Analyser",
          "maxLoopCount": "3",
          "fallbackMessage": "<p>Maximum regeneration attempts reached (3 tries).</p>",
          "loopUpdateState": []
        },
        "outputAnchors": [],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 265,
      "height": 66,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": -178.36586434558419,
        "y": 269.22835270143435
      }
    },
    {
      "id": "llmAgentflow_2",
      "position": {
        "x": 81.71013630694776,
        "y": 141.10505167258492
      },
      "data": {
        "id": "llmAgentflow_2",
        "label": "Output Format for Review",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_2-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_2-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_2-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_2-input-llmMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_2-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_2-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_2-input-llmUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_2-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_2-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_2-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatOpenAI",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>Format the topic options array into readable numbered list for human review.</p><p>For each option, display:</p><p>Option [number]:</p><p>Topic: [topic text]</p><p>Titles:</p><p>  1. [title 1]</p><p>  2. [title 2]</p><p>  3. [title 3]</p><p>---</p><p>Make it easy to read and choose.</p>"
            },
            {
              "role": "user",
              "content": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.topic_options\" data-label=\"$flow.state.topic_options\">{{ $flow.state.topic_options }}</span> </p>"
            }
          ],
          "llmEnableMemory": false,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": "",
          "llmUpdateState": [
            {
              "key": "formatted_options",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "cache": "",
            "modelName": "gpt-5",
            "temperature": "0.1",
            "streaming": true,
            "maxTokens": "",
            "topP": "",
            "frequencyPenalty": "",
            "presencePenalty": "",
            "timeout": "",
            "strictToolCalling": "",
            "stopSequence": "",
            "basepath": "",
            "proxyUrl": "",
            "baseOptions": "",
            "allowImageUploads": "",
            "reasoning": "",
            "llmModel": "chatOpenAI"
          }
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_2-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 237,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": 81.71013630694776,
        "y": 141.10505167258492
      },
      "dragging": false
    },
    {
      "id": "customFunctionAgentflow_0",
      "position": {
        "x": 610.564712968707,
        "y": 140.9670225989633
      },
      "data": {
        "id": "customFunctionAgentflow_0",
        "label": "Selected Topic & Title Extractor",
        "version": 1.1,
        "name": "customFunctionAgentflow",
        "type": "CustomFunction",
        "color": "#E4B7FF",
        "baseClasses": [
          "CustomFunction"
        ],
        "category": "Agent Flows",
        "description": "Execute custom function",
        "inputParams": [
          {
            "label": "Input Variables",
            "name": "customFunctionInputVariables",
            "description": "Input variables can be used in the function with prefix $. For example: $foo",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Variable Name",
                "name": "variableName",
                "type": "string"
              },
              {
                "label": "Variable Value",
                "name": "variableValue",
                "type": "string",
                "acceptVariable": true
              }
            ],
            "id": "customFunctionAgentflow_0-input-customFunctionInputVariables-array",
            "display": true
          },
          {
            "label": "Javascript Function",
            "name": "customFunctionJavascriptFunction",
            "type": "code",
            "codeExample": "/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Input Variables with the prefix $. For example: $foo\n* You can get default flow config: $flow.sessionId, $flow.chatId, $flow.chatflowId, $flow.input, $flow.state\n* You can get global variables: $vars.<variable-name>\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}",
            "description": "The function to execute. Must return a string or an object that can be converted to a string.",
            "id": "customFunctionAgentflow_0-input-customFunctionJavascriptFunction-code",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "customFunctionUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "customFunctionAgentflow_0-input-customFunctionUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "customFunctionInputVariables": "",
          "customFunctionJavascriptFunction": "const hitlOutput = $vars.humanInputAgentflow_0 || $flow.input;\nconst formattedText = $flow.state.formatted_options || \"\";\n\nlet feedback = \"\";\nif (typeof hitlOutput === \"object\" && hitlOutput !== null) {\n  feedback = hitlOutput.feedback || \"\";\n} else if (typeof hitlOutput === \"string\") {\n  try {\n    const parsed = JSON.parse(hitlOutput);\n    feedback = parsed.feedback || \"\";\n  } catch (e) {\n    feedback = hitlOutput;\n  }\n}\n\nfeedback = feedback.trim();\nconst parts = feedback.split('-');\nconst optionNum = parseInt(parts[0]);\nconst titleNum = parseInt(parts[1]);\n\nconst optionBlocks = formattedText.split(/Option \\d+:/);\nif (optionBlocks.length <= optionNum) {\n  return JSON.stringify({ topic: \"\", title: \"Option not found\" });\n}\n\nconst selectedBlock = optionBlocks[optionNum];\n\nconst topicMatch = selectedBlock.match(/Topic:\\s*(.+?)(?=\\n|Titles:)/s);\nconst topic = topicMatch ? topicMatch[1].trim() : \"\";\n\nconst titlesMatch = selectedBlock.match(/Titles:\\s*([\\s\\S]+?)(?=Option \\d+:|$)/);\nconst titlesText = titlesMatch ? titlesMatch[1] : \"\";\nconst titleLines = titlesText.split('\\n').filter(line => /^\\d+\\./.test(line.trim()));\n\nif (titleLines.length < titleNum) {\n  return JSON.stringify({ topic, title: \"Title not found\" });\n}\n\nconst selectedTitle = titleLines[titleNum - 1].replace(/^\\d+\\.\\s*/, '').trim();\nreturn JSON.stringify({ topic, title: selectedTitle });",
          "customFunctionUpdateState": [
            {
              "key": "topic",
              "value": "<p>{{ output.topic }}</p>"
            },
            {
              "key": "title",
              "value": "<p>{{ output.title }}</p>"
            }
          ]
        },
        "outputAnchors": [
          {
            "id": "customFunctionAgentflow_0-output-customFunctionAgentflow",
            "label": "Custom Function",
            "name": "customFunctionAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 275,
      "height": 66,
      "selected": false,
      "positionAbsolute": {
        "x": 610.564712968707,
        "y": 140.9670225989633
      },
      "dragging": false
    },
    {
      "id": "llmAgentflow_1",
      "position": {
        "x": 622.5429863688738,
        "y": 272.9713980710223
      },
      "data": {
        "id": "llmAgentflow_1",
        "label": "Draft Writer",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_1-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_1-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_1-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_1-input-llmMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_1-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_1-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_1-input-llmUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_1-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_1-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_1-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatAnthropic",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>You are a blog content writer for Thermo Shape. Write in Ari's authentic voice following this style guide:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.style_guide\" data-label=\"$flow.state.style_guide\">{{ $flow.state.style_guide }}</span></p><p>CRITICAL LENGTH REQUIREMENT:</p><p>Posts must be 300-400 words total.</p><p>Plan your structure to fit this length:</p><p>- Adjust detail level and section depth to stay within range</p><p>- Prioritize quality over quantity - be concise and impactful</p><p>- Ensure natural, complete conclusion within word limit</p><p>- Don't include unnecessary elaboration</p><p>Target: ~350 words (leaves room for variation while staying in range)</p><p>FORBIDDEN PATTERNS - DO NOT USE:</p><p>- Em dashes \" - \" (known AI writing marker)</p><p>- Exclamation marks</p><p>- Any form of \"uhvatila\", \"uhvatim\"</p><p>- \"Kako...\" question starters</p><p>- \"Evo kako...\" constructions</p><p>- \"Otkrij kako...\" phrases</p><p>- \"[Number] načina...\" formats</p><p>- \"Savjeti za...\", \"Tehnike za...\" formats</p><p>- \"Zaboravi [X]\", \"Ne zaboravi...\" constructions</p><p>- \"Tvoj put do...\" phrases</p><p>- Do not use with \"jučer\", \"danas\",\"prekjučer\", \"sutra\", \"sinoć\" or any time reference in the first sentence</p><p>STRUCTURE:</p><p>- Title (H1 heading - use provided title exactly)</p><p>- Intro section (2-4 semantic paragraphs)</p><p>- 3-5 H2 sections (2-5 semantic paragraphs per section)</p><p>- Final content section: Can be H2 section, OR P.S., OR just concluding paragraphs without heading</p><p>- Signature line: \"S ljubavlju, Ari ❤️\"</p><p>- Optional: Additional P.S. after signature (if not already used before signature)</p><p>PARAGRAPH FORMATTING:</p><p>- Each paragraph = complete unit of thought/idea</p><p>- Typically 1-4 sentences per semantic paragraph</p><p>- Keep related ideas together in same paragraph</p><p>- Natural progression of thought within paragraphs</p><p>PARAGRAPH ROLES:</p><p>Intro Section (2-4 paragraphs):</p><p>- Opening paragraph: Vulnerable confession or relatable moment (hook)</p><p>- Subsequent paragraphs: Build context, emotional stakes, personal struggle</p><p>- Flow naturally into first H2 section</p><p>H2 Section Paragraphs (2-4 per section):</p><p>- First paragraph: Introduce section's core idea or reflection</p><p>- Middle paragraph(s): Develop insight, personal experience, deeper reflection</p><p>- Final paragraph: Resolution or transition to next section, has to consist of maximum 50 words.</p><p>Throughout:</p><p>- Each paragraph advances the narrative/reflection</p><p>- Avoid static description or list-like paragraphs</p><p>- Maintain emotional authenticity and vulnerability</p><p>FINAL CONTENT SECTION (Before Signature):</p><p>This can vary - be creative:</p><p>- H2 section with topic-specific title</p><p>- H2 section titled \"I za kraj...\"</p><p>- P.S. section</p><p>- Just concluding paragraphs without any heading</p><p>Choose what fits the post's flow naturally.</p><p>KEYWORD INTEGRATION (MANDATORY):</p><p>You have been provided with:</p><p>- Selected Element: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.keyword\" data-label=\"$flow.state.keyword\">{{ $flow.state.keyword }}</span></p><p>- Product Context: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.keyword_description\" data-label=\"$flow.state.keyword_description\">{{ $flow.state.keyword_description }}</span></p><p>STRICT RULES FOR KEYWORD MENTION:</p><p>- Use ONLY the information provided in keyword_description</p><p>- Do NOT add any details not mentioned in the description</p><p>- Do NOT invent features, benefits, or specifications</p><p>- Do NOT embellish or expand beyond what's given</p><p>- If the description mentions X, write about X only</p><p>- Keep the mention personal and experiential (how it felt, what you noticed)</p><p>- Frame it naturally within your emotional narrative</p><p>- Personal framing, never promotional</p><p>FORBIDDEN:</p><p>- Adding technical details not in the description</p><p>- Inventing specific benefits not mentioned</p><p>- Creating features or capabilities from imagination</p><p>- Expanding on the science or technology beyond what's provided</p><p>This is professional salon/studio equipment. Ari experiences it AT SALONS (sessions, treatments, appointments), not at home.</p><p>INTEGRATION:</p><p>- Set up scenario: emotional or physical state that led to salon visit</p><p>- Create natural context in your narrative to weave in the chosen element: what you needed, how you felt</p><p>- Mention element naturally: as part of the salon experience</p><p>- Natural outcome: how it helped, what changed</p><p>- Use personal, conversational Croatian framing (not promotional language)</p><p>- The mention should feel like part of your personal story, not an insertion</p><p>Vary your phrasing naturally within the narrative flow - use natural Croatian expressions that fit the context. The mention must feel like part of your personal story, not an insertion.</p><p>One authentic mention is enough. Quality over quantity.</p><p>P.S. SECTION:</p><p>P.S. can appear before signature (as final content section) OR after signature - this is a stylistic choice.</p><p>P.S. is a genuine afterthought or personal reflection that didn't fit in the main narrative flow.</p><p>It might mention Thermo Shape elements, or it might not - whatever flows naturally from the post.</p><p>Use natural, personal tone. If you don't have a genuine afterthought that adds value, skip P.S. entirely. Do NOT force it.</p><p>LANGUAGE:</p><p>- 100% Croatian</p><p>- First-person confessional tone</p><p>- Specific scenarios, not abstract concepts</p><p>- Natural spoken Croatian (avoid overly formal or stiff language)</p><p>- Use appropriate colloquialisms for Croatian women audience</p><p>- Do NOT use Serbian language, it is a different language</p><p>Output ONLY the Croatian content, no meta-commentary.</p>"
            },
            {
              "role": "user",
              "content": "<p>Topic: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.topic\" data-label=\"$flow.state.topic\">{{ $flow.state.topic }}</span></p><p>Title: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.title\" data-label=\"$flow.state.title\">{{ $flow.state.title }}</span></p><p>Write the blog post draft in Croatian following the style guide.</p>"
            }
          ],
          "llmEnableMemory": false,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": "",
          "llmUpdateState": [
            {
              "key": "draft",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "cache": "",
            "modelName": "claude-sonnet-4-5",
            "temperature": "0.9",
            "streaming": true,
            "maxTokensToSample": "",
            "topP": "",
            "topK": "",
            "extendedThinking": true,
            "budgetTokens": 1024,
            "allowImageUploads": "",
            "llmModel": "chatAnthropic"
          },
          "undefined": ""
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_1-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 212,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": 622.5429863688738,
        "y": 272.9713980710223
      },
      "dragging": false
    },
    {
      "id": "llmAgentflow_3",
      "position": {
        "x": 931.8101570322071,
        "y": 273.6707833886175
      },
      "data": {
        "id": "llmAgentflow_3",
        "label": "Content Critic",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_3-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_3-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_3-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_3-input-llmMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_3-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_3-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_3-input-llmUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_3-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_3-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_3-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatAnthropic",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>You are a Croatian content editor for Thermo Shape blog. Analyse the draft against the style guide and provide detailed, actionable feedback in English.</p><p>LANGUAGE RULES:</p><p>- Write ALL feedback and analysis in English</p><p>- When showing Croatian content (original, corrected, or quoted), keep it in Croatian</p><p>- Never translate Croatian text to English</p><p>STYLE GUIDE USAGE:</p><p>- Use the style guide to identify PATTERNS, not to provide copy-paste examples</p><p>- Reference patterns conceptually (e.g., \"semantic paragraphs follow 3-6 sentence pattern\")</p><p>- Only quote style guide examples when absolutely necessary to clarify unclear feedback</p><p>- Final Writer should APPLY patterns to the draft content, not copy guide examples</p><p>---</p><p>ANALYZE THESE AREAS:</p><p>1. TONE &amp; VOICE</p><p>Check if draft maintains:</p><p>- First-person confessional style</p><p>- Vulnerability and relatability</p><p>- Friend-to-friend conversational tone</p><p>- Specific scenarios vs. abstract concepts (personal moments, not generic wellness)</p><p>Compare to style guide patterns.</p><p>2. STRUCTURE</p><p>Verify:</p><p>- Intro section: 2-4 semantic paragraphs (minimum 2, maximum 4 - all acceptable)</p><p>- Main sections: 3-5 H2 sections (minimum 3, maximum 5 - all acceptable)</p><p>- Section paragraph counts: 2-5 per section (minimum 2, maximum 5 - all acceptable, variation is natural)</p><p>- Final content section: Present and appropriate (can be H2, P.S., or just paragraphs), contains maximum 50 words</p><p>- Signature: \"S ljubavlju, Ari ❤️\" present</p><p>Only flag if outside these ranges.</p><p>3. SECTION HEADINGS QUALITY</p><p>Evaluate H2 headings:</p><p>- Are they engaging and curiosity-driving (not generic)?</p><p>- Natural Croatian phrasing?</p><p>- Aligned with confessional/personal tone?</p><p>- Topic-specific (not abstract wellness jargon)?</p><p>Flag generic headings like \"Važnost odmora\" or \"Kako poboljšati zdravlje\"</p><p>4. PARAGRAPH STRUCTURE</p><p>Check:</p><p>- Is each paragraph a complete unit of thought/idea?</p><p>- Typically 1-4 sentences per semantic paragraph?</p><p>- Related ideas kept together in same paragraph?</p><p>- Natural progression within paragraphs?</p><p>- Avoiding walls of text (6+ sentences)?</p><p>5. REPETITIVENESS</p><p>Flag if:</p><p>- Same phrases repeated (e.g., \"meni pomaže...\" 3+ times)</p><p>- Similar sentence structures overused</p><p>- Product mentions sound formulaic</p><p>- Lack of phrasing variety</p><p>6. THERMO SHAPE INTEGRATION CHECK</p><p>Assess naturalness and presence:</p><p>- Is at least ONE Thermo Shape element mentioned somewhere in the content? (This is mandatory)</p><p>- Are mentions (products/technologies/categories/business concepts) woven naturally into the narrative?</p><p>- Do they feel like part of the story, or insertions?</p><p>- Personal framing (not promotional tone)?</p><p>- Varied phrasing?</p><p>- Does it fit the context organically?</p><p>- Does it sound forced or stuffed?</p><p>Quality over quantity - one natural mention is better than multiple forced ones.</p><p>If COMPLETELY MISSING:</p><p>- Flag as critical issue</p><p>- Suggest WHERE and WHAT TYPE would fit naturally</p><p>- The style guide for appropriate options</p><p>- Ensure suggestions match the emotional/practical context of that section</p><p>If PRESENT but weak:</p><p>- Assess authenticity and naturalness</p><p>- Suggest improvements to existing mentions</p><p>- Verify natural personal framing</p><p>DO NOT push for additional mentions if one already fits well.</p><p>7. CONTENT LENGTH - CRITICAL CHECK</p><p>Count the words in the draft as accurately as you can.</p><p>Target range: 300-400 words</p><p>Counting tips:</p><p>- Count carefully, word by word if needed</p><p>- Don't estimate - actually count</p><p>- Exclude markdown symbols (# * etc.) from your count</p><p>If word count is UNDER 300 or OVER 400: Flag as CRITICAL IMPROVEMENT (Must Fix)</p><p>Report the word count you calculated and how many words need to be added/removed.</p><p>If within range (300-400): Don't mention word count.</p><p>Note: Be as accurate as possible with counting. If you're uncertain about the count, recount before flagging.</p><p>8. SIGNATURE FORMAT</p><p>Verify exact signature appears: S ljubavlju, Ari ❤️</p><p>- Check exact format (not variations like \"Tvoja Ari\" or \"Ljubav, Ari\")</p><p>- Flag any deviations</p><p>9. AUTHENTICITY MARKERS</p><p>Does content feel like genuine personal reflection vs. AI-generated wellness advice?</p><p>Red flags:</p><p>- Too polished/formal</p><p>- Lacks specific personal details</p><p>- Sounds like a listicle or how-to guide</p><p>- Missing emotional vulnerability</p><p>- Generic wellness advice anyone could write</p><p>10. EMOTIONAL ARC</p><p>Does post have natural progression:</p><p>- Opening: vulnerable confession/relatable struggle?</p><p>- Middle: reflection/insight (not solutions)?</p><p>- Closing: resolution/encouragement without pressure?</p><p>- Natural flow, not just topic coverage?</p><p>11. TITLE-CONTENT MATCH</p><p>Does the post deliver on what the title promises?</p><p>- Title sets expectation, content fulfils it?</p><p>- Coherent connection between title and narrative?</p><p>12. P.S. PATTERN (If Present)</p><p>P.S. can appear before signature (as final section) OR after signature.</p><p>If P.S. is included, verify:</p><p>- Does it sound natural and add value?</p><p>- Is it a genuine afterthought/reflection?</p><p>- Does it feel forced or formulaic?</p><p>If P.S. sounds forced, suggest removing it entirely.</p><p>---</p><p>OUTPUT FORMAT:</p><p>## STRENGTHS</p><p>[What works well - be specific with examples]</p><p>## CRITICAL IMPROVEMENTS (Must Fix)</p><p>[Issues that significantly impact quality/brand voice - organized by category]</p><p>## OPTIONAL IMPROVEMENTS (Consider)</p><p>[Suggestions that would enhance but aren't essential]</p><p>## REVISION RECOMMENDATIONS</p><p>[Prioritized actionable steps for Final Writer]</p><p>Be direct, specific, and constructive. Use style guide patterns to support feedback.</p>"
            },
            {
              "role": "user",
              "content": "<p>Analyze this draft article against the style guide:</p><p>Style Guide:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.style_guide\" data-label=\"$flow.state.style_guide\">{{ $flow.state.style_guide }}</span></p><p>Draft:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.draft\" data-label=\"$flow.state.draft\">{{ $flow.state.draft }}</span></p><p>Selected Title:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.title\" data-label=\"$flow.state.title\">{{ $flow.state.title }}</span></p><p>Selected Topic:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.topic\" data-label=\"$flow.state.topic\">{{ $flow.state.topic }}</span></p>"
            }
          ],
          "llmEnableMemory": false,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": "",
          "llmUpdateState": [
            {
              "key": "content_critic",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "cache": "",
            "modelName": "claude-sonnet-4-5",
            "temperature": "0.3",
            "streaming": true,
            "maxTokensToSample": "",
            "topP": "",
            "topK": "",
            "extendedThinking": true,
            "budgetTokens": 1024,
            "allowImageUploads": "",
            "llmModel": "chatAnthropic"
          }
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_3-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 212,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": 931.8101570322071,
        "y": 273.6707833886175
      },
      "dragging": false
    },
    {
      "id": "llmAgentflow_4",
      "position": {
        "x": 1223.3887371244136,
        "y": 273.37229922658474
      },
      "data": {
        "id": "llmAgentflow_4",
        "label": "Language Critic",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_4-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_4-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_4-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_4-input-llmMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_4-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_4-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_4-input-llmUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_4-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_4-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_4-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatOpenAI",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>You are a Croatian language expert. Your ONLY task is to check Croatian language quality in the draft blog post.</p><p>Verify every word and grammar pattern is Croatian, NOT Serbian. These are different languages, watch for Serbian vs Croatian differences.</p><p>The draft contains: H1 title, intro paragraphs, H2 section headings, body content, and signature. Check ALL of this content.</p><p>LANGUAGE RULES:</p><p>- Write ALL feedback in English</p><p>- When showing Croatian content (original or corrected), keep it in Croatian</p><p>- Never translate Croatian text to English</p><p>- Format corrections: Original \"...\" → Corrected \"...\"</p><p>THERMO SHAPE VOCABULARY - LEGITIMATE TERMS:</p><p>These are brand-specific product names, technologies, and categories - NOT errors:</p><p>- Products: infracrvena deka, CryoSLIM, skaner tijela, EMS odijelo, masažni roller, infrabicikl, vodena kabina, aqua bicikl, vakuum kabina, vakuum bicikl</p><p>- Technologies: infracrveno svjetlo, infracrvene terapije, vakuum tehnologija, cryo tehnologija, EMS stimulacija, infracrvena terapija</p><p>- Categories: vakuumfitness, wellness spa, aquafitness</p><p>- Compound terms: Any combination of the above terms</p><p>DO NOT flag these as errors or suggest \"more common\" alternatives.</p><p>These terms are intentional brand vocabulary and correct for Thermo Shape content.</p><p>CRITICAL DISTINCTION - STYLE VS. ERRORS:</p><p>Confessional blog writing uses intentional stylistic choices:</p><p>- Sentence fragments for emphasis or dramatic pause</p><p>- Short, punchy constructions for rhythm</p><p>- Repetition for emotional impact</p><p>- Breaking grammar rules intentionally for effect</p><p>Before flagging as an error, consider:</p><p>- Is this grammatically incorrect, or stylistically unconventional?</p><p>- Could this create emphasis, rhythm, or emotional weight?</p><p>- Does it match the confessional, vulnerable blog voice?</p><p>- Would \"fixing\" it make the writing more generic or formal?</p><p>If the \"error\" serves a stylistic purpose and fits the voice → DO NOT FLAG IT.</p><p>---</p><p>FOCUS AREAS - CHECK CAREFULLY:</p><p>1. NON-EXISTENT WORDS</p><p>Identify made-up or non-existent Croatian words.</p><p>- Flag any words that don't exist in Croatian language (excluding Thermo Shape brand terms above)</p><p>- Provide correct alternatives</p><p>2. WRONG WORD MEANINGS IN CONTEXT</p><p>Check if words mean what the writer intended in context.</p><p>- Verify word meanings match the intended context</p><p>- Flag misused words or phrases</p><p>3. UNNATURAL PHRASING</p><p>Flag grammatically correct but unnatural expressions that no native Croatian speaker would use.</p><p>- Identify phrases that sound like direct translations from English or AI-generated text</p><p>- Suggest natural Croatian alternatives</p><p>4. COLLOQUIAL APPROPRIATENESS</p><p>Verify language fits target audience (Croatian women, conversational blog):</p><p>- Not too formal/bookish</p><p>- Not too casual/slang</p><p>- Age and gender-appropriate expressions</p><p>- Natural spoken Croatian rhythm</p><p>5. GRAMMAR &amp; SPELLING</p><p>Check:</p><p>- Subject-verb agreement</p><p>- Proper case endings (nominative, genitive, dative, accusative, vocative, locative, instrumental)</p><p>- Correct diacritics (č, ć, š, ž, đ)</p><p>- Spelling errors</p><p>- Word order</p><p>6. CROATIAN VS SERBIAN VERIFICATION</p><p>Verify words are Croatian, not Serbian variants.</p><p>These are different languages with distinct vocabulary.</p><p>Flag Serbian words and provide Croatian alternatives.</p><p>7. PREPOSITIONS &amp; PARTICLES</p><p>Croatian prepositions are complex - verify correct usage:</p><p>- \"s\" vs \"sa\" usage</p><p>- Preposition + case combinations</p><p>- Particle placement</p><p>---</p><p>OUTPUT FORMAT:</p><p>## LANGUAGE QUALITY ASSESSMENT</p><p>### CRITICAL ERRORS (Must Fix)</p><p>[Non-existent words, wrong meanings, major grammar errors]</p><p>Format: Original \"...\" → Corrected \"...\"</p><p>Explain why it's wrong.</p><p>### UNNATURAL PHRASING (Should Fix)</p><p>[Grammatically correct but awkward/unnatural expressions]</p><p>Format: Original \"...\" → Suggested \"...\"</p><p>Explain why current version is unnatural.</p><p>### MINOR ISSUES (Optional)</p><p>[Small improvements for better flow]</p><p>Format: Original \"...\" → Suggested \"...\"</p><p>### OVERALL LANGUAGE QUALITY</p><p>[Brief summary: Does the language sound like authentic Croatian? Any patterns of issues?]</p><p>Be thorough and specific. Native Croatian speakers should find the final text completely natural.</p>"
            },
            {
              "role": "user",
              "content": "<p>Analyse the Croatian language quality of this draft:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.draft\" data-label=\"$flow.state.draft\">{{ $flow.state.draft }}</span></p>"
            }
          ],
          "llmEnableMemory": false,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": "",
          "llmUpdateState": [
            {
              "key": "language_critic",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "cache": "",
            "modelName": "gpt-5.2",
            "temperature": "0.2",
            "streaming": true,
            "maxTokens": "",
            "topP": "",
            "frequencyPenalty": "",
            "presencePenalty": "",
            "timeout": "",
            "strictToolCalling": "",
            "stopSequence": "",
            "basepath": "",
            "proxyUrl": "",
            "baseOptions": "",
            "allowImageUploads": "",
            "reasoning": "",
            "llmModel": "chatOpenAI"
          }
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_4-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 174,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": 1223.3887371244136,
        "y": 273.37229922658474
      },
      "dragging": false
    },
    {
      "id": "llmAgentflow_5",
      "position": {
        "x": 622.7950703574462,
        "y": 403.5013165736634
      },
      "data": {
        "id": "llmAgentflow_5",
        "label": "Writer",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_5-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_5-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_5-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_5-input-llmMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_5-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_5-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_5-input-llmUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_5-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_5-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_5-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatAnthropic",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>You are the final revision writer for Thermo Shape blog posts. Your task is to produce the polished final version by applying feedback from TWO expert critics while preserving Ari's authentic confessional voice.</p><p>INPUTS YOU'RE WORKING WITH:</p><p>1. Original Draft: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.draft\" data-label=\"$flow.state.draft\">{{ $flow.state.draft }}</span></p><p>2. Content Critic Feedback: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.content_critic\" data-label=\"$flow.state.content_critic\">{{ $flow.state.content_critic }}</span></p><p>3. Language Critic Feedback: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.language_critic\" data-label=\"$flow.state.language_critic\">{{ $flow.state.language_critic }}</span></p><p>4. Style Guide Reference: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.style_guide\" data-label=\"$flow.state.style_guide\">{{ $flow.state.style_guide }}</span></p><p>---</p><p>## FEEDBACK PROCESSING STRATEGY</p><p>PRIORITY LEVELS:</p><p>1. <strong>CRITICAL IMPROVEMENTS (Must Fix)</strong> - Apply all of these</p><p>- Word count outside 300-400 range (HIGHEST PRIORITY)</p><p>- Major tone/voice mismatches</p><p>- Missing or forced Thermo Shape integration</p><p>- Non-existent Croatian words</p><p>- Unnatural phrasing that breaks authenticity</p><p></p><p>2. <strong>SHOULD FIX</strong> - Apply most of these unless they conflict with voice</p><p>- Structural improvements</p><p>- Minor language refinements</p><p>- Natural phrasing suggestions</p><p></p><p>3. <strong>OPTIONAL IMPROVEMENTS</strong> - Apply selectively</p><p>- Only if they genuinely enhance quality</p><p>- Skip if they risk over-polishing or losing authenticity</p><p>HANDLING BOTH CRITICS:</p><p>- Content Critic focuses on: tone, structure, product integration, emotional arc</p><p>- Language Critic focuses on: Croatian language quality, grammar, natural phrasing</p><p>- Both perspectives complement each other - address both sets of feedback</p><p>- If feedback seems to conflict, prioritize authentic voice and natural Croatian</p><p>---</p><p>## REVISION APPROACH</p><p><strong>If Draft is Already Strong (90%+ good):</strong></p><p>- Make targeted improvements only to flagged issues</p><p>- Don't rewrite sections that are working well</p><p>- Preserve effective emotional moments and authentic voice</p><p><strong>If Draft Has Significant Issues:</strong></p><p>- Apply comprehensive revisions</p><p>- Reorganize sections if critics suggest it would improve flow</p><p>- Rewrite problematic areas while maintaining style</p><p><strong>CRITICAL: Word Count Requirement</strong></p><p>Target: 300-400 words total</p><p>If Content Critic flags word count as CRITICAL:</p><p>- <strong>Under 300 words</strong>: Expand content strategically</p><p>- Add emotional depth, personal details, or reflection</p><p>- Expand existing paragraphs with natural elaboration</p><p>- Don't add filler - every addition must serve the narrative</p><p></p><p>- <strong>Over 400 words</strong>: Cut content strategically</p><p>- Remove redundant elaboration</p><p>- Tighten verbose sections</p><p>- Combine related ideas</p><p>- Keep the emotional core and key insights intact</p><p>Maintain quality and complete thoughts while hitting the range.</p><p>---</p><p>## VOICE PRESERVATION - CRITICAL</p><p>This is Ari's authentic confessional blog voice. DO NOT:</p><p>- Over-polish into generic content</p><p>- Remove stylistic fragments if they serve emphasis</p><p>- \"Fix\" intentional grammar breaks that create rhythm</p><p>- Make it sound more formal or proper</p><p>HOWEVER:</p><p>Language Critic's corrections are REAL ERRORS, not style choices:</p><p>- Non-existent words</p><p>- Wrong word meanings</p><p>- Unnatural phrasing (expressions no native speaker would use)</p><p>- Grammar errors (wrong case, verb agreement, etc.)</p><p>APPLY ALL Language Critic corrections categorized as: - \"Critical Errors\" - 100% must fix - \"Unnatural Phrasing\" - Must fix unless explicitly justified.<br>If Language Critic says something is unnatural or incorrect, it IS incorrect - apply the fix.</p><p>DO:</p><p>- Keep the friend-to-friend conversational tone</p><p>- Preserve specific personal scenarios over abstract concepts</p><p>- Maintain emotional authenticity</p><p>- Use natural spoken Croatian</p><p>- Fix actual errors (wrong words, unnatural Croatian) while keeping authentic style</p><p>---</p><p>## STRUCTURAL FLEXIBILITY</p><p>You CAN reorganize if critics suggest:</p><p>- Reordering H2 sections for better flow</p><p>- Moving content between sections</p><p>- Adjusting intro/conclusion structure</p><p>- Changing paragraph groupings</p><p>ALWAYS MAINTAIN:</p><p>- Overall confessional narrative arc</p><p>- Personal vulnerability and relatability</p><p>- Natural emotional progression</p><p>- Croatian language throughout</p><p>---</p><p>## THERMO SHAPE INTEGRATION CHECK</p><p>Ensure at least ONE natural mention exists (as Content Critic likely verified):</p><p>- Products, technologies, categories, or business concepts</p><p>- Woven naturally into narrative</p><p>- Personal framing (not promotional)</p><p>- Varied phrasing</p><p>If Content Critic flagged integration issues:</p><p>- Apply their specific suggestions</p><p>- Ensure mentions feel organic to the context</p><p>- Don't force additional mentions if one already works well</p><p>---</p><p>## OUTPUT FORMAT</p><p>Plain Croatian markdown text with:</p><p>- H1 title (use <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.title\" data-label=\"$flow.state.title\">{{ $flow.state.title }}</span> exactly)</p><p>- Intro paragraphs</p><p>- H2 sections with content</p><p>- Final section (H2, P.S., or just paragraphs - whatever works)</p><p>- Signature: S ljubavlju, Ari ❤️</p><p>- Optional P.S. (if it adds genuine value)</p><p>NO HTML formatting yet (that's for Output Formatter).</p><p>NO meta-commentary about revisions made.</p><p>NO English text anywhere.</p><p>---</p><p>## REVISION WORKFLOW</p><p>1. Read both critic feedbacks carefully</p><p>2. Identify CRITICAL issues (especially word count)</p><p>3. Note structural or content suggestions</p><p>4. Review language quality issues</p><p>5. Plan your revision strategy</p><p>6. Apply improvements systematically:</p><p>- Fix critical issues first</p><p>- Address should-fix items</p><p>- Selectively apply optional improvements</p><p>7. Verify final output maintains authentic voice</p><p>8. Check word count is within 300-400 range</p><p>Output ONLY the final revised Croatian blog post. Nothing else.</p><p></p>"
            },
            {
              "role": "user",
              "content": "<p>Apply feedback from both critics to create the final polished version.</p><p>Draft:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.draft\" data-label=\"$flow.state.draft\">{{ $flow.state.draft }}</span></p><p>Content Critic Feedback:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.content_critic\" data-label=\"$flow.state.content_critic\">{{ $flow.state.content_critic }}</span></p><p>Language Critic Feedback:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.language_critic\" data-label=\"$flow.state.language_critic\">{{ $flow.state.language_critic }}</span></p><p>Revise the draft into final publication-ready Croatian blog post</p>"
            }
          ],
          "llmEnableMemory": false,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": "",
          "llmUpdateState": [
            {
              "key": "blog_post",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "cache": "",
            "modelName": "claude-sonnet-4-5",
            "temperature": "0.7",
            "streaming": true,
            "maxTokensToSample": "",
            "topP": "",
            "topK": "",
            "extendedThinking": true,
            "budgetTokens": 1024,
            "allowImageUploads": "",
            "llmModel": "chatAnthropic"
          }
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_5-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 212,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": 622.7950703574462,
        "y": 403.5013165736634
      },
      "dragging": false
    },
    {
      "id": "humanInputAgentflow_1",
      "position": {
        "x": 1225.2778338738099,
        "y": 400.6745012884254
      },
      "data": {
        "id": "humanInputAgentflow_1",
        "label": "Human Review",
        "version": 1,
        "name": "humanInputAgentflow",
        "type": "HumanInput",
        "color": "#6E6EFD",
        "baseClasses": [
          "HumanInput"
        ],
        "category": "Agent Flows",
        "description": "Request human input, approval or rejection during execution",
        "inputParams": [
          {
            "label": "Description Type",
            "name": "humanInputDescriptionType",
            "type": "options",
            "options": [
              {
                "label": "Fixed",
                "name": "fixed",
                "description": "Specify a fixed description"
              },
              {
                "label": "Dynamic",
                "name": "dynamic",
                "description": "Use LLM to generate a description"
              }
            ],
            "id": "humanInputAgentflow_1-input-humanInputDescriptionType-options",
            "display": true
          },
          {
            "label": "Description",
            "name": "humanInputDescription",
            "type": "string",
            "placeholder": "Are you sure you want to proceed?",
            "acceptVariable": true,
            "rows": 4,
            "show": {
              "humanInputDescriptionType": "fixed"
            },
            "id": "humanInputAgentflow_1-input-humanInputDescription-string",
            "display": true
          },
          {
            "label": "Model",
            "name": "humanInputModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "show": {
              "humanInputDescriptionType": "dynamic"
            },
            "id": "humanInputAgentflow_1-input-humanInputModel-asyncOptions",
            "display": false
          },
          {
            "label": "Prompt",
            "name": "humanInputModelPrompt",
            "type": "string",
            "default": "<p>Summarize the conversation between the user and the assistant, reiterate the last message from the assistant, and ask if user would like to proceed or if they have any feedback. </p>\n<ul>\n<li>Begin by capturing the key points of the conversation, ensuring that you reflect the main ideas and themes discussed.</li>\n<li>Then, clearly reproduce the last message sent by the assistant to maintain continuity. Make sure the whole message is reproduced.</li>\n<li>Finally, ask the user if they would like to proceed, or provide any feedback on the last assistant message</li>\n</ul>\n<h2 id=\"output-format-the-output-should-be-structured-in-three-parts-\">Output Format The output should be structured in three parts in text:</h2>\n<ul>\n<li>A summary of the conversation (1-3 sentences).</li>\n<li>The last assistant message (exactly as it appeared).</li>\n<li>Ask the user if they would like to proceed, or provide any feedback on last assistant message. No other explanation and elaboration is needed.</li>\n</ul>\n",
            "acceptVariable": true,
            "generateInstruction": true,
            "rows": 4,
            "show": {
              "humanInputDescriptionType": "dynamic"
            },
            "id": "humanInputAgentflow_1-input-humanInputModelPrompt-string",
            "display": false
          },
          {
            "label": "Enable Feedback",
            "name": "humanInputEnableFeedback",
            "type": "boolean",
            "default": true,
            "id": "humanInputAgentflow_1-input-humanInputEnableFeedback-boolean",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "humanInputDescriptionType": "fixed",
          "humanInputDescription": "<p>Review the blog post above. <br>Approve to proceed - proceed and submitt an empty feedback or<br>Reject with specific feedback (e.g.  replace X with Y,  rewrite XYZ,  shorten intro...)</p>",
          "humanInputEnableFeedback": true,
          "undefined": ""
        },
        "outputAnchors": [
          {
            "id": "humanInputAgentflow_1-output-0",
            "label": "Human Input",
            "name": "humanInputAgentflow"
          },
          {
            "id": "humanInputAgentflow_1-output-1",
            "label": "Human Input",
            "name": "humanInputAgentflow"
          }
        ],
        "outputs": {
          "humanInputAgentflow": ""
        },
        "selected": false
      },
      "type": "agentFlow",
      "width": 168,
      "height": 80,
      "selected": false,
      "positionAbsolute": {
        "x": 1225.2778338738099,
        "y": 400.6745012884254
      },
      "dragging": false
    },
    {
      "id": "customFunctionAgentflow_1",
      "position": {
        "x": 1189.7598528939086,
        "y": 538.3413816244703
      },
      "data": {
        "id": "customFunctionAgentflow_1",
        "label": "Feedback Extraction",
        "version": 1.1,
        "name": "customFunctionAgentflow",
        "type": "CustomFunction",
        "color": "#E4B7FF",
        "baseClasses": [
          "CustomFunction"
        ],
        "category": "Agent Flows",
        "description": "Execute custom function",
        "inputParams": [
          {
            "label": "Input Variables",
            "name": "customFunctionInputVariables",
            "description": "Input variables can be used in the function with prefix $. For example: $foo",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Variable Name",
                "name": "variableName",
                "type": "string"
              },
              {
                "label": "Variable Value",
                "name": "variableValue",
                "type": "string",
                "acceptVariable": true
              }
            ],
            "id": "customFunctionAgentflow_1-input-customFunctionInputVariables-array",
            "display": true
          },
          {
            "label": "Javascript Function",
            "name": "customFunctionJavascriptFunction",
            "type": "code",
            "codeExample": "/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Input Variables with the prefix $. For example: $foo\n* You can get default flow config: $flow.sessionId, $flow.chatId, $flow.chatflowId, $flow.input, $flow.state\n* You can get global variables: $vars.<variable-name>\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}",
            "description": "The function to execute. Must return a string or an object that can be converted to a string.",
            "id": "customFunctionAgentflow_1-input-customFunctionJavascriptFunction-code",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "customFunctionUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "customFunctionAgentflow_1-input-customFunctionUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "customFunctionInputVariables": "",
          "customFunctionJavascriptFunction": "const hitlRevision = $vars.humanInputAgentflow_1 || $flow.input;\n\nlet feedback = \"\";\n\nif (typeof hitlRevision === \"object\" && hitlRevision !== null) {\n  feedback = hitlRevision.feedback || \"\";\n} else if (typeof hitlRevision === \"string\") {\n  try {\n    const parsed = JSON.parse(hitlRevision);\n    feedback = parsed.feedback || \"\";\n  } catch (e) {\n    feedback = hitlRevision;\n  }\n}\n\nfeedback = feedback.trim();\n\nreturn feedback;",
          "customFunctionUpdateState": [
            {
              "key": "human_feedback",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "undefined": ""
        },
        "outputAnchors": [
          {
            "id": "customFunctionAgentflow_1-output-customFunctionAgentflow",
            "label": "Custom Function",
            "name": "customFunctionAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 205,
      "height": 66,
      "selected": false,
      "positionAbsolute": {
        "x": 1189.7598528939086,
        "y": 538.3413816244703
      },
      "dragging": false
    },
    {
      "id": "llmAgentflow_7",
      "position": {
        "x": 934.6398663788652,
        "y": 403.09156604250654
      },
      "data": {
        "id": "llmAgentflow_7",
        "label": "Revision Writer",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_7-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_7-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_7-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_7-input-llmMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_7-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_7-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_7-input-llmUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_7-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_7-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_7-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatAnthropic",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>You are revising a Croatian blog post based on human reviewer feedback.</p><p>CRITICAL INSTRUCTIONS:</p><p>1. Check if Human Reviewer Feedback is provided below</p><p>   </p><p>2. If feedback is EMPTY:</p><p>   - This is the first review presentation</p><p>   - Output the blog post exactly as received</p><p>   - Make NO changes</p><p>   </p><p>3. If feedback is PROVIDED:</p><p>   - Apply the human feedback exactly as specified</p><p>   - Make ONLY the changes requested</p><p>   - Do NOT change anything else</p><p>   - Preserve all other aspects of the post</p><p>4. Output format:</p><p>   - Plain Croatian markdown text</p><p>   - Same structure as input (H1, H2, paragraphs, signature)</p><p>   - NO meta-commentary about changes made</p><p>   - NO English text anywhere</p><p>The post has already been polished by Content and Language Critics. If the human reviewer has feedback, make those specific changes and nothing else.</p>"
            },
            {
              "role": "user",
              "content": "<p>Current Blog Post:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.blog_post\" data-label=\"$flow.state.blog_post\">{{ $flow.state.blog_post }}</span></p><p>Human Reviewer Feedback:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.human_feedback\" data-label=\"$flow.state.human_feedback\">{{ $flow.state.human_feedback }}</span></p><p>Output the blog post (unchanged if no feedback, revised if feedback provided).</p>"
            }
          ],
          "llmEnableMemory": false,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": "",
          "llmUpdateState": [
            {
              "key": "blog_post",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "cache": "",
            "modelName": "claude-sonnet-4-5",
            "temperature": "0.7",
            "streaming": true,
            "maxTokensToSample": "",
            "topP": "",
            "topK": "",
            "extendedThinking": true,
            "budgetTokens": 1024,
            "allowImageUploads": "",
            "llmModel": "chatAnthropic"
          },
          "undefined": ""
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_7-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 212,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": 934.6398663788652,
        "y": 403.09156604250654
      },
      "dragging": false
    },
    {
      "id": "agentAgentflow_1",
      "position": {
        "x": 1224.4845987505453,
        "y": 124.21675835398037
      },
      "data": {
        "id": "agentAgentflow_1",
        "label": "SEO Agent",
        "version": 3.2,
        "name": "agentAgentflow",
        "type": "Agent",
        "color": "#4DD0E1",
        "baseClasses": [
          "Agent"
        ],
        "category": "Agent Flows",
        "description": "Dynamically choose and utilize tools during runtime, enabling multi-step reasoning",
        "inputParams": [
          {
            "label": "Model",
            "name": "agentModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "agentAgentflow_1-input-agentModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "agentMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "agentAgentflow_1-input-agentMessages-array",
            "display": true
          },
          {
            "label": "OpenAI Built-in Tools",
            "name": "agentToolsBuiltInOpenAI",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "Web Search",
                "name": "web_search_preview",
                "description": "Search the web for the latest information"
              },
              {
                "label": "Code Interpreter",
                "name": "code_interpreter",
                "description": "Write and run Python code in a sandboxed environment"
              },
              {
                "label": "Image Generation",
                "name": "image_generation",
                "description": "Generate images based on a text prompt"
              }
            ],
            "show": {
              "agentModel": "chatOpenAI"
            },
            "id": "agentAgentflow_1-input-agentToolsBuiltInOpenAI-multiOptions",
            "display": true
          },
          {
            "label": "Gemini Built-in Tools",
            "name": "agentToolsBuiltInGemini",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "URL Context",
                "name": "urlContext",
                "description": "Extract content from given URLs"
              },
              {
                "label": "Google Search",
                "name": "googleSearch",
                "description": "Search real-time web content"
              },
              {
                "label": "Code Execution",
                "name": "codeExecution",
                "description": "Write and run Python code in a sandboxed environment"
              }
            ],
            "show": {
              "agentModel": "chatGoogleGenerativeAI"
            },
            "id": "agentAgentflow_1-input-agentToolsBuiltInGemini-multiOptions",
            "display": false
          },
          {
            "label": "Anthropic Built-in Tools",
            "name": "agentToolsBuiltInAnthropic",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "Web Search",
                "name": "web_search_20250305",
                "description": "Search the web for the latest information"
              },
              {
                "label": "Web Fetch",
                "name": "web_fetch_20250910",
                "description": "Retrieve full content from specified web pages"
              }
            ],
            "show": {
              "agentModel": "chatAnthropic"
            },
            "id": "agentAgentflow_1-input-agentToolsBuiltInAnthropic-multiOptions",
            "display": false
          },
          {
            "label": "Tools",
            "name": "agentTools",
            "type": "array",
            "optional": true,
            "array": [
              {
                "label": "Tool",
                "name": "agentSelectedTool",
                "type": "asyncOptions",
                "loadMethod": "listTools",
                "loadConfig": true
              },
              {
                "label": "Require Human Input",
                "name": "agentSelectedToolRequiresHumanInput",
                "type": "boolean",
                "optional": true
              }
            ],
            "id": "agentAgentflow_1-input-agentTools-array",
            "display": true
          },
          {
            "label": "Knowledge (Document Stores)",
            "name": "agentKnowledgeDocumentStores",
            "type": "array",
            "description": "Give your agent context about different document sources. Document stores must be upserted in advance.",
            "array": [
              {
                "label": "Document Store",
                "name": "documentStore",
                "type": "asyncOptions",
                "loadMethod": "listStores"
              },
              {
                "label": "Describe Knowledge",
                "name": "docStoreDescription",
                "type": "string",
                "generateDocStoreDescription": true,
                "placeholder": "Describe what the knowledge base is about, this is useful for the AI to know when and how to search for correct information",
                "rows": 4
              },
              {
                "label": "Return Source Documents",
                "name": "returnSourceDocuments",
                "type": "boolean",
                "optional": true
              }
            ],
            "optional": true,
            "id": "agentAgentflow_1-input-agentKnowledgeDocumentStores-array",
            "display": true
          },
          {
            "label": "Knowledge (Vector Embeddings)",
            "name": "agentKnowledgeVSEmbeddings",
            "type": "array",
            "description": "Give your agent context about different document sources from existing vector stores and embeddings",
            "array": [
              {
                "label": "Vector Store",
                "name": "vectorStore",
                "type": "asyncOptions",
                "loadMethod": "listVectorStores",
                "loadConfig": true
              },
              {
                "label": "Embedding Model",
                "name": "embeddingModel",
                "type": "asyncOptions",
                "loadMethod": "listEmbeddings",
                "loadConfig": true
              },
              {
                "label": "Knowledge Name",
                "name": "knowledgeName",
                "type": "string",
                "placeholder": "A short name for the knowledge base, this is useful for the AI to know when and how to search for correct information"
              },
              {
                "label": "Describe Knowledge",
                "name": "knowledgeDescription",
                "type": "string",
                "placeholder": "Describe what the knowledge base is about, this is useful for the AI to know when and how to search for correct information",
                "rows": 4
              },
              {
                "label": "Return Source Documents",
                "name": "returnSourceDocuments",
                "type": "boolean",
                "optional": true
              }
            ],
            "optional": true,
            "id": "agentAgentflow_1-input-agentKnowledgeVSEmbeddings-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "agentEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "agentAgentflow_1-input-agentEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "agentMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "agentEnableMemory": true
            },
            "id": "agentAgentflow_1-input-agentMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "agentMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "agentMemoryType": "windowSize"
            },
            "id": "agentAgentflow_1-input-agentMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "agentMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "agentMemoryType": "conversationSummaryBuffer"
            },
            "id": "agentAgentflow_1-input-agentMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "agentUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "agentEnableMemory": true
            },
            "id": "agentAgentflow_1-input-agentUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "agentReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "agentAgentflow_1-input-agentReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "agentStructuredOutput",
            "description": "Instruct the Agent to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "agentStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "agentStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "agentAgentflow_1-input-agentStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "agentUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "agentAgentflow_1-input-agentUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "agentModel": "chatOpenAI",
          "agentMessages": [
            {
              "role": "system",
              "content": "<p>You are a product selection system for Thermo Shape blog posts.</p><p>TASK:</p><p>1. Use web scraper tool to fetch this specific product page: <span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.selected_product_url\" data-label=\"$flow.state.selected_product_url\">{{ $flow.state.selected_product_url }}</span></p><p>2. Extract key details about the product and salon experience</p><p>3. Write 3-4 sentences in Croatian describing the experience</p><p>FOCUS ON:</p><p>- How it feels during the session/treatment</p><p>- What benefits clients notice</p><p>- The experience at the salon/wellness centre</p><p>Focus on EXPERIENCE and FEELING, not technical specifications.</p><p>OUTPUT FORMAT:</p><p>Output EXACTLY as JSON (no other text):</p><p>{</p><p>\"keyword\": \"<span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.selected_product_name\" data-label=\"$flow.state.selected_product_name\">{{ $flow.state.selected_product_name }}</span>\",</p><p>\"keyword_description\": \"3-4 Croatian sentences about salon experience\"</p><p>}</p><p>CRITICAL: Use the exact product name from flow state. Do NOT modify it.</p>"
            },
            {
              "role": "user",
              "content": "<p>Select a random Thermo Shape product, fetch its page, and provide context in JSON format.</p>"
            }
          ],
          "agentTools": [
            {
              "agentSelectedTool": "webScraperTool",
              "agentSelectedToolRequiresHumanInput": "",
              "agentSelectedToolConfig": {
                "scrapeMode": "recursive",
                "maxDepth": "0",
                "maxPages": "1",
                "timeoutS": 60,
                "description": "",
                "agentSelectedTool": "webScraperTool"
              }
            }
          ],
          "agentKnowledgeDocumentStores": "",
          "agentKnowledgeVSEmbeddings": "",
          "agentEnableMemory": false,
          "agentReturnResponseAs": "assistantMessage",
          "agentStructuredOutput": [
            {
              "key": "keyword_description",
              "type": "string",
              "enumValues": "",
              "jsonSchema": "",
              "description": "3-4 sentences in Croatian about the salon experience with this product"
            }
          ],
          "agentUpdateState": [
            {
              "key": "keyword_description",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output.keyword_description\" data-label=\"output.keyword_description\">{{ output.keyword_description }}</span> </p>"
            }
          ],
          "agentModelConfig": {
            "credential": "",
            "modelName": "gpt-5",
            "temperature": "0.5",
            "streaming": true,
            "maxTokens": "",
            "topP": "",
            "frequencyPenalty": "",
            "presencePenalty": "",
            "timeout": "",
            "strictToolCalling": "",
            "stopSequence": "",
            "basepath": "",
            "proxyUrl": "",
            "baseOptions": "",
            "allowImageUploads": "",
            "reasoning": "",
            "agentModel": "chatOpenAI"
          },
          "undefined": ""
        },
        "outputAnchors": [
          {
            "id": "agentAgentflow_1-output-agentAgentflow",
            "label": "Agent",
            "name": "agentAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 141,
      "height": 100,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 1224.4845987505453,
        "y": 124.21675835398037
      }
    },
    {
      "id": "stickyNoteAgentflow_0",
      "position": {
        "x": 625.423782066145,
        "y": 530.0404727366541
      },
      "data": {
        "id": "stickyNoteAgentflow_0",
        "label": "Sticky Note",
        "version": 1,
        "name": "stickyNoteAgentflow",
        "type": "StickyNote",
        "color": "#fee440",
        "baseClasses": [
          "StickyNote"
        ],
        "category": "Agent Flows",
        "description": "Add notes to the agent flow",
        "inputParams": [
          {
            "label": "",
            "name": "note",
            "type": "string",
            "rows": 1,
            "placeholder": "Type something here",
            "optional": true,
            "id": "stickyNoteAgentflow_0-input-note-string",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "note": "Writer handles critics' output. Revision Writer  takes Writer's version and applies human feedback only."
        },
        "outputAnchors": [
          {
            "id": "stickyNoteAgentflow_0-output-stickyNoteAgentflow",
            "label": "Sticky Note",
            "name": "stickyNoteAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "stickyNote",
      "width": 210,
      "height": 143,
      "selected": false,
      "positionAbsolute": {
        "x": 625.423782066145,
        "y": 530.0404727366541
      },
      "dragging": false
    },
    {
      "id": "agentAgentflow_2",
      "position": {
        "x": 1459.9750769783275,
        "y": 378.75099149668216
      },
      "data": {
        "id": "agentAgentflow_2",
        "label": "Image Fetcher",
        "version": 3.2,
        "name": "agentAgentflow",
        "type": "Agent",
        "color": "#4DD0E1",
        "baseClasses": [
          "Agent"
        ],
        "category": "Agent Flows",
        "description": "Dynamically choose and utilize tools during runtime, enabling multi-step reasoning",
        "inputParams": [
          {
            "label": "Model",
            "name": "agentModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "agentAgentflow_2-input-agentModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "agentMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "agentAgentflow_2-input-agentMessages-array",
            "display": true
          },
          {
            "label": "OpenAI Built-in Tools",
            "name": "agentToolsBuiltInOpenAI",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "Web Search",
                "name": "web_search_preview",
                "description": "Search the web for the latest information"
              },
              {
                "label": "Code Interpreter",
                "name": "code_interpreter",
                "description": "Write and run Python code in a sandboxed environment"
              },
              {
                "label": "Image Generation",
                "name": "image_generation",
                "description": "Generate images based on a text prompt"
              }
            ],
            "show": {
              "agentModel": "chatOpenAI"
            },
            "id": "agentAgentflow_2-input-agentToolsBuiltInOpenAI-multiOptions",
            "display": true
          },
          {
            "label": "Gemini Built-in Tools",
            "name": "agentToolsBuiltInGemini",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "URL Context",
                "name": "urlContext",
                "description": "Extract content from given URLs"
              },
              {
                "label": "Google Search",
                "name": "googleSearch",
                "description": "Search real-time web content"
              },
              {
                "label": "Code Execution",
                "name": "codeExecution",
                "description": "Write and run Python code in a sandboxed environment"
              }
            ],
            "show": {
              "agentModel": "chatGoogleGenerativeAI"
            },
            "id": "agentAgentflow_2-input-agentToolsBuiltInGemini-multiOptions",
            "display": false
          },
          {
            "label": "Anthropic Built-in Tools",
            "name": "agentToolsBuiltInAnthropic",
            "type": "multiOptions",
            "optional": true,
            "options": [
              {
                "label": "Web Search",
                "name": "web_search_20250305",
                "description": "Search the web for the latest information"
              },
              {
                "label": "Web Fetch",
                "name": "web_fetch_20250910",
                "description": "Retrieve full content from specified web pages"
              }
            ],
            "show": {
              "agentModel": "chatAnthropic"
            },
            "id": "agentAgentflow_2-input-agentToolsBuiltInAnthropic-multiOptions",
            "display": false
          },
          {
            "label": "Tools",
            "name": "agentTools",
            "type": "array",
            "optional": true,
            "array": [
              {
                "label": "Tool",
                "name": "agentSelectedTool",
                "type": "asyncOptions",
                "loadMethod": "listTools",
                "loadConfig": true
              },
              {
                "label": "Require Human Input",
                "name": "agentSelectedToolRequiresHumanInput",
                "type": "boolean",
                "optional": true
              }
            ],
            "id": "agentAgentflow_2-input-agentTools-array",
            "display": true
          },
          {
            "label": "Knowledge (Document Stores)",
            "name": "agentKnowledgeDocumentStores",
            "type": "array",
            "description": "Give your agent context about different document sources. Document stores must be upserted in advance.",
            "array": [
              {
                "label": "Document Store",
                "name": "documentStore",
                "type": "asyncOptions",
                "loadMethod": "listStores"
              },
              {
                "label": "Describe Knowledge",
                "name": "docStoreDescription",
                "type": "string",
                "generateDocStoreDescription": true,
                "placeholder": "Describe what the knowledge base is about, this is useful for the AI to know when and how to search for correct information",
                "rows": 4
              },
              {
                "label": "Return Source Documents",
                "name": "returnSourceDocuments",
                "type": "boolean",
                "optional": true
              }
            ],
            "optional": true,
            "id": "agentAgentflow_2-input-agentKnowledgeDocumentStores-array",
            "display": true
          },
          {
            "label": "Knowledge (Vector Embeddings)",
            "name": "agentKnowledgeVSEmbeddings",
            "type": "array",
            "description": "Give your agent context about different document sources from existing vector stores and embeddings",
            "array": [
              {
                "label": "Vector Store",
                "name": "vectorStore",
                "type": "asyncOptions",
                "loadMethod": "listVectorStores",
                "loadConfig": true
              },
              {
                "label": "Embedding Model",
                "name": "embeddingModel",
                "type": "asyncOptions",
                "loadMethod": "listEmbeddings",
                "loadConfig": true
              },
              {
                "label": "Knowledge Name",
                "name": "knowledgeName",
                "type": "string",
                "placeholder": "A short name for the knowledge base, this is useful for the AI to know when and how to search for correct information"
              },
              {
                "label": "Describe Knowledge",
                "name": "knowledgeDescription",
                "type": "string",
                "placeholder": "Describe what the knowledge base is about, this is useful for the AI to know when and how to search for correct information",
                "rows": 4
              },
              {
                "label": "Return Source Documents",
                "name": "returnSourceDocuments",
                "type": "boolean",
                "optional": true
              }
            ],
            "optional": true,
            "id": "agentAgentflow_2-input-agentKnowledgeVSEmbeddings-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "agentEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "agentAgentflow_2-input-agentEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "agentMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "agentEnableMemory": true
            },
            "id": "agentAgentflow_2-input-agentMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "agentMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "agentMemoryType": "windowSize"
            },
            "id": "agentAgentflow_2-input-agentMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "agentMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "agentMemoryType": "conversationSummaryBuffer"
            },
            "id": "agentAgentflow_2-input-agentMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "agentUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "agentEnableMemory": true
            },
            "id": "agentAgentflow_2-input-agentUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "agentReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "agentAgentflow_2-input-agentReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "agentStructuredOutput",
            "description": "Instruct the Agent to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "agentStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "agentStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "agentAgentflow_2-input-agentStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "agentUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "agentAgentflow_2-input-agentUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "agentModel": "chatOpenAI",
          "agentMessages": [
            {
              "role": "system",
              "content": "<p>You are an image mood analyser for blog posts. Your task is to select images that visually represent the blog's core theme and emotional message.</p><p>CRITICAL: Images must match the blog's actual content and theme.</p><p>PROCESS:</p><p>1. ANALYZE THE BLOG POST DEEPLY:</p><p>- Read the title carefully - this is the main theme</p><p>- Read the opening paragraphs - what is the core emotional struggle or reflection?</p><p>- Identify the central concept or metaphor</p><p>- What is the post ACTUALLY about?</p><p>2. IDENTIFY VISUAL CONCEPTS:</p><p>For banner image (represents opening/intro):</p><p>- What visual image would represent the main theme/title?</p><p>- What mood does the opening convey?</p><p>- Think literally AND metaphorically</p><p>For bottom image (represents conclusion/reflection):</p><p>- What visual represents the resolution or final reflection?</p><p>- What feeling does the ending leave?</p><p>3. GENERATE SPECIFIC SEARCH QUERIES:</p><p>- 2-4 words max</p><p>- Must directly relate to the blog's specific theme</p><p>- Think about actual visual elements that represent the concept</p><p></p><p>EXAMPLES:</p><p>- Blog about \"smile as a mask\" → search: \"mask face\" or \"mask\" or \"hidden emotions\" or \"mask portrait\"</p><p>- Blog about \"listening to body\" → search: \"woman meditation\" or \"quiet reflection\"</p><p>- Blog about \"forgiveness\" → search: \"letting go\" or \"peace acceptance\"</p><p>FORBIDDEN:</p><p>- Exercise/fitness imagery</p><p>- Gym/workout scenes</p><p>- Images that have no connection to the blog's theme or emotional tone</p><p>4. USE UNSPLASH SEARCH TOOL:</p><p>- Call tool TWICE (banner + bottom)</p><p>- Banner: orientation=\"landscape\"</p><p>- Bottom: orientation=\"portrait\"</p><p>- Tool returns 5 image options with descriptions</p><p>5. SELECT BEST MATCHING IMAGE:</p><p>For each set of 5 images:</p><p>- Read each image's description</p><p>- Match against the blog's SPECIFIC theme</p><p>- Prioritize:</p><p>* Thematic relevance (does it represent the concept?)</p><p>* Visual clarity (avoid cluttered images)</p><p>* Emotional tone match</p><p>- If images contain people:</p><p>* Prefer women (blog is written by woman, Ari, for women)</p><p>* Avoid men unless theme requires it</p><p>- Choose the ONE image that best represents the blog's theme</p><p>6. CREATE CROATIAN ALT TEXT:</p><p>- Take the selected image's English description</p><p>- Translate to Croatian (brief, 2-4 words)</p><p>- Keep it descriptive and natural</p><p>7. FORMAT HTML OUTPUT:</p><p>Banner image:</p><p>&lt;img src=\"https://images.unsplash.com/photo-[ID]?q=80&amp;w=710&amp;h=475&amp;fit=crop&amp;crop=entropy\" alt=\"[Croatian translation]\" width=\"710\" height=\"475\"&gt;</p><p>Bottom image:</p><p>&lt;img src=\"https://images.unsplash.com/photo-[ID]?q=80&amp;w=220&amp;h=330&amp;fit=crop&amp;crop=entropy\" alt=\"[Croatian translation]\"&gt;</p><p>QUALITY CONTROL CHECKLIST:</p><p>Before finalizing selections, ask yourself:</p><p>- Does this image actually relate to the blog's specific theme?</p><p>- Would someone reading about [blog theme] expect to see this image?</p><p>- Am I choosing based on the content, or just picking randomly?</p><p>- Does the search query reflect what the blog is ACTUALLY about?</p><p>If the answer to any of these is \"no\" - rethink your selection.</p><p>CRITICAL RULES:</p><p>- Images MUST match the blog's specific theme</p><p>- Search queries must be specific to the blog content</p><p>- Select images that visually represent the core concept</p><p>- Think about what the reader would expect to see</p>"
            },
            {
              "role": "user",
              "content": "<p>Analyse this approved blog post and generate appropriate images:</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.blog_post\" data-label=\"$flow.state.blog_post\">{{ $flow.state.blog_post }}</span></p><p>Generate banner and bottom images using the Unsplash Search tool.</p>"
            }
          ],
          "agentTools": [
            {
              "agentSelectedTool": "customTool",
              "agentSelectedToolRequiresHumanInput": "",
              "agentSelectedToolConfig": {
                "selectedTool": "3a90dc93-d843-4289-9feb-3fad2b81a10a",
                "returnDirect": "",
                "customToolName": "",
                "customToolDesc": "",
                "customToolSchema": "",
                "customToolFunc": "",
                "agentSelectedTool": "customTool"
              }
            }
          ],
          "agentKnowledgeDocumentStores": "",
          "agentKnowledgeVSEmbeddings": "",
          "agentEnableMemory": false,
          "agentReturnResponseAs": "assistantMessage",
          "agentStructuredOutput": [
            {
              "key": "banner_image",
              "type": "string",
              "enumValues": "",
              "jsonSchema": "",
              "description": "Complete HTML img tag for bottom image with src, alt, width, and height attributes"
            },
            {
              "key": "bottom_image",
              "type": "string",
              "enumValues": "",
              "jsonSchema": "",
              "description": "Complete HTML img tag for bottom image with src, alt, width, and height attributes"
            }
          ],
          "agentUpdateState": [
            {
              "key": "banner_image",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output.banner_image\" data-label=\"output.banner_image\">{{ output.banner_image }}</span> </p>"
            },
            {
              "key": "bottom_image",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output.bottom_image\" data-label=\"output.bottom_image\">{{ output.bottom_image }}</span> </p>"
            }
          ],
          "agentModelConfig": {
            "credential": "",
            "modelName": "gpt-5",
            "temperature": 0.9,
            "streaming": true,
            "maxTokens": "",
            "topP": "",
            "frequencyPenalty": "",
            "presencePenalty": "",
            "timeout": "",
            "strictToolCalling": "",
            "stopSequence": "",
            "basepath": "",
            "proxyUrl": "",
            "baseOptions": "",
            "allowImageUploads": "",
            "reasoning": "",
            "agentModel": "chatOpenAI"
          }
        },
        "outputAnchors": [
          {
            "id": "agentAgentflow_2-output-agentAgentflow",
            "label": "Agent",
            "name": "agentAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 164,
      "height": 100,
      "positionAbsolute": {
        "x": 1459.9750769783275,
        "y": 378.75099149668216
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "loopAgentflow_1",
      "position": {
        "x": 941.5575354740452,
        "y": 535.1073401689413
      },
      "data": {
        "id": "loopAgentflow_1",
        "label": "To Revision Writer",
        "version": 1.2,
        "name": "loopAgentflow",
        "type": "Loop",
        "color": "#FFA07A",
        "hideOutput": true,
        "baseClasses": [
          "Loop"
        ],
        "category": "Agent Flows",
        "description": "Loop back to a previous node",
        "inputParams": [
          {
            "label": "Loop Back To",
            "name": "loopBackToNode",
            "type": "asyncOptions",
            "loadMethod": "listPreviousNodes",
            "freeSolo": true,
            "id": "loopAgentflow_1-input-loopBackToNode-asyncOptions",
            "display": true
          },
          {
            "label": "Max Loop Count",
            "name": "maxLoopCount",
            "type": "number",
            "default": 5,
            "id": "loopAgentflow_1-input-maxLoopCount-number",
            "display": true
          },
          {
            "label": "Fallback Message",
            "name": "fallbackMessage",
            "type": "string",
            "description": "Message to display if the loop count is exceeded",
            "placeholder": "Enter your fallback message here",
            "rows": 4,
            "acceptVariable": true,
            "optional": true,
            "id": "loopAgentflow_1-input-fallbackMessage-string",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "loopUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "loopAgentflow_1-input-loopUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "loopBackToNode": "llmAgentflow_7-Revision Writer",
          "maxLoopCount": "3",
          "fallbackMessage": "<p>Maximum revision attempts reached (3 tries). If fundamental changes are needed, please restart the flow with a different topic selection.</p>",
          "loopUpdateState": ""
        },
        "outputAnchors": [],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 189,
      "height": 66,
      "selected": false,
      "positionAbsolute": {
        "x": 941.5575354740452,
        "y": 535.1073401689413
      },
      "dragging": false
    },
    {
      "id": "customFunctionAgentflow_2",
      "position": {
        "x": 928.7999196217249,
        "y": 140.5950569401756
      },
      "data": {
        "id": "customFunctionAgentflow_2",
        "label": "Random Keyword Selector",
        "version": 1.1,
        "name": "customFunctionAgentflow",
        "type": "CustomFunction",
        "color": "#E4B7FF",
        "baseClasses": [
          "CustomFunction"
        ],
        "category": "Agent Flows",
        "description": "Execute custom function",
        "inputParams": [
          {
            "label": "Input Variables",
            "name": "customFunctionInputVariables",
            "description": "Input variables can be used in the function with prefix $. For example: $foo",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Variable Name",
                "name": "variableName",
                "type": "string"
              },
              {
                "label": "Variable Value",
                "name": "variableValue",
                "type": "string",
                "acceptVariable": true
              }
            ],
            "id": "customFunctionAgentflow_2-input-customFunctionInputVariables-array",
            "display": true
          },
          {
            "label": "Javascript Function",
            "name": "customFunctionJavascriptFunction",
            "type": "code",
            "codeExample": "/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Input Variables with the prefix $. For example: $foo\n* You can get default flow config: $flow.sessionId, $flow.chatId, $flow.chatflowId, $flow.input, $flow.state\n* You can get global variables: $vars.<variable-name>\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}",
            "description": "The function to execute. Must return a string or an object that can be converted to a string.",
            "id": "customFunctionAgentflow_2-input-customFunctionJavascriptFunction-code",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "customFunctionUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "customFunctionAgentflow_2-input-customFunctionUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "customFunctionInputVariables": "",
          "customFunctionJavascriptFunction": "// Product list with exact names and URLs\nconst keywords = [\n  { name: \"vakuum kabina\", url: \"https://thermoshape.hr/vakuumfitness/thermo-shape-kabina/\" },\n  { name: \"vakuum bicikl\", url: \"https://thermoshape.hr/vakuumfitness/thermo-shape-bicikl/\" },\n  { name: \"masažni roller\", url: \"https://thermoshape.hr/vakuumfitness/thermo-shape-masazni-roller/\" },\n  { name: \"EMS odijelo\", url: \"https://thermoshape.hr/vakuumfitness/thermo-shape-ems-odijelo/\" },\n  { name: \"skaner tijela\", url: \"https://thermoshape.hr/wellness-spa/thermo-shape-skaner-tijela/\" },\n  { name: \"CryoSLIM\", url: \"https://thermoshape.hr/wellness-spa/thermo-shape-cryoslim/\" },\n  { name: \"infracrvena deka\", url: \"https://thermoshape.hr/wellness-spa/thermo-shape-infracrvena-deka/\" },\n  { name: \"vodena kabina\", url: \"https://thermoshape.hr/wellness-spa/thermo-shape-vodena-kabina-za-rehabilitaciju/\" },\n  { name: \"EMS stimulacija\", url: \"https://thermoshape.hr/wellness-spa/thermo-shape-ems-stimulacija-misica/\" },\n  { name: \"Aqua PoleJump\", url: \"https://thermoshape.hr/aquafitness/aqua-polejump/\" },\n  { name: \"vodena traka\", url: \"https://thermoshape.hr/aquafitness/vodena-traka-za-hodanje-aqua-treadmill/\" },\n  { name: \"vodeni steper\", url: \"https://thermoshape.hr/aquafitness/vodeni-steper-aqua-stepper/\" },\n  { name: \"aqua bike\", url: \"https://thermoshape.hr/aquafitness/aquabike-x/\" },\n  { name: \"vakuumfitness\", url: \"https://thermoshape.hr/vakuumfitness/\" },\n  { name: \"wellness & spa\", url: \"https://thermoshape.hr/wellness-spa/\" }\n];\n\n// Generate truly random index\nconst randomIndex = Math.floor(Math.random() * keywords.length);\nconst selected = keywords[randomIndex];\n\n// Return as JSON string\nreturn JSON.stringify({\n  selected_keyword: selected.name,\n  selected_keyword_url: selected.url\n});",
          "customFunctionUpdateState": [
            {
              "key": "keyword",
              "value": "<p>{{ output.selected_keyword }}</p>"
            },
            {
              "key": "keyword_url",
              "value": "<p>{{ output.selected_keyword_url }}</p>"
            }
          ]
        },
        "outputAnchors": [
          {
            "id": "customFunctionAgentflow_2-output-customFunctionAgentflow",
            "label": "Custom Function",
            "name": "customFunctionAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 243,
      "height": 66,
      "selected": false,
      "positionAbsolute": {
        "x": 928.7999196217249,
        "y": 140.5950569401756
      },
      "dragging": false
    },
    {
      "id": "llmAgentflow_6",
      "position": {
        "x": 1690.0458469946755,
        "y": 398.06598336167997
      },
      "data": {
        "id": "llmAgentflow_6",
        "label": "Output Formatter",
        "version": 1.1,
        "name": "llmAgentflow",
        "type": "LLM",
        "color": "#64B5F6",
        "baseClasses": [
          "LLM"
        ],
        "category": "Agent Flows",
        "description": "Large language models to analyze user-provided inputs and generate responses",
        "inputParams": [
          {
            "label": "Model",
            "name": "llmModel",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "loadConfig": true,
            "id": "llmAgentflow_6-input-llmModel-asyncOptions",
            "display": true
          },
          {
            "label": "Messages",
            "name": "llmMessages",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Role",
                "name": "role",
                "type": "options",
                "options": [
                  {
                    "label": "System",
                    "name": "system"
                  },
                  {
                    "label": "Assistant",
                    "name": "assistant"
                  },
                  {
                    "label": "Developer",
                    "name": "developer"
                  },
                  {
                    "label": "User",
                    "name": "user"
                  }
                ]
              },
              {
                "label": "Content",
                "name": "content",
                "type": "string",
                "acceptVariable": true,
                "generateInstruction": true,
                "rows": 4
              }
            ],
            "id": "llmAgentflow_6-input-llmMessages-array",
            "display": true
          },
          {
            "label": "Enable Memory",
            "name": "llmEnableMemory",
            "type": "boolean",
            "description": "Enable memory for the conversation thread",
            "default": true,
            "optional": true,
            "id": "llmAgentflow_6-input-llmEnableMemory-boolean",
            "display": true
          },
          {
            "label": "Memory Type",
            "name": "llmMemoryType",
            "type": "options",
            "options": [
              {
                "label": "All Messages",
                "name": "allMessages",
                "description": "Retrieve all messages from the conversation"
              },
              {
                "label": "Window Size",
                "name": "windowSize",
                "description": "Uses a fixed window size to surface the last N messages"
              },
              {
                "label": "Conversation Summary",
                "name": "conversationSummary",
                "description": "Summarizes the whole conversation"
              },
              {
                "label": "Conversation Summary Buffer",
                "name": "conversationSummaryBuffer",
                "description": "Summarize conversations once token limit is reached. Default to 2000"
              }
            ],
            "optional": true,
            "default": "allMessages",
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_6-input-llmMemoryType-options",
            "display": false
          },
          {
            "label": "Window Size",
            "name": "llmMemoryWindowSize",
            "type": "number",
            "default": "20",
            "description": "Uses a fixed window size to surface the last N messages",
            "show": {
              "llmMemoryType": "windowSize"
            },
            "id": "llmAgentflow_6-input-llmMemoryWindowSize-number",
            "display": false
          },
          {
            "label": "Max Token Limit",
            "name": "llmMemoryMaxTokenLimit",
            "type": "number",
            "default": "2000",
            "description": "Summarize conversations once token limit is reached. Default to 2000",
            "show": {
              "llmMemoryType": "conversationSummaryBuffer"
            },
            "id": "llmAgentflow_6-input-llmMemoryMaxTokenLimit-number",
            "display": false
          },
          {
            "label": "Input Message",
            "name": "llmUserMessage",
            "type": "string",
            "description": "Add an input message as user message at the end of the conversation",
            "rows": 4,
            "optional": true,
            "acceptVariable": true,
            "show": {
              "llmEnableMemory": true
            },
            "id": "llmAgentflow_6-input-llmUserMessage-string",
            "display": false
          },
          {
            "label": "Return Response As",
            "name": "llmReturnResponseAs",
            "type": "options",
            "options": [
              {
                "label": "User Message",
                "name": "userMessage"
              },
              {
                "label": "Assistant Message",
                "name": "assistantMessage"
              }
            ],
            "default": "userMessage",
            "id": "llmAgentflow_6-input-llmReturnResponseAs-options",
            "display": true
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "string"
              },
              {
                "label": "Type",
                "name": "type",
                "type": "options",
                "options": [
                  {
                    "label": "String",
                    "name": "string"
                  },
                  {
                    "label": "String Array",
                    "name": "stringArray"
                  },
                  {
                    "label": "Number",
                    "name": "number"
                  },
                  {
                    "label": "Boolean",
                    "name": "boolean"
                  },
                  {
                    "label": "Enum",
                    "name": "enum"
                  },
                  {
                    "label": "JSON Array",
                    "name": "jsonArray"
                  }
                ]
              },
              {
                "label": "Enum Values",
                "name": "enumValues",
                "type": "string",
                "placeholder": "value1, value2, value3",
                "description": "Enum values. Separated by comma",
                "optional": true,
                "show": {
                  "llmStructuredOutput[$index].type": "enum"
                }
              },
              {
                "label": "JSON Schema",
                "name": "jsonSchema",
                "type": "code",
                "placeholder": "{\n    \"answer\": {\n        \"type\": \"string\",\n        \"description\": \"Value of the answer\"\n    },\n    \"reason\": {\n        \"type\": \"string\",\n        \"description\": \"Reason for the answer\"\n    },\n    \"optional\": {\n        \"type\": \"boolean\"\n    },\n    \"count\": {\n        \"type\": \"number\"\n    },\n    \"children\": {\n        \"type\": \"array\",\n        \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"value\": {\n                    \"type\": \"string\",\n                    \"description\": \"Value of the children's answer\"\n                }\n            }\n        }\n    }\n}",
                "description": "JSON schema for the structured output",
                "optional": true,
                "hideCodeExecute": true,
                "show": {
                  "llmStructuredOutput[$index].type": "jsonArray"
                }
              },
              {
                "label": "Description",
                "name": "description",
                "type": "string",
                "placeholder": "Description of the key"
              }
            ],
            "id": "llmAgentflow_6-input-llmStructuredOutput-array",
            "display": true
          },
          {
            "label": "Update Flow State",
            "name": "llmUpdateState",
            "description": "Update runtime state during the execution of the workflow",
            "type": "array",
            "optional": true,
            "acceptVariable": true,
            "array": [
              {
                "label": "Key",
                "name": "key",
                "type": "asyncOptions",
                "loadMethod": "listRuntimeStateKeys"
              },
              {
                "label": "Value",
                "name": "value",
                "type": "string",
                "acceptVariable": true,
                "acceptNodeOutputAsVariable": true
              }
            ],
            "id": "llmAgentflow_6-input-llmUpdateState-array",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "llmModel": "chatOpenAI",
          "llmMessages": [
            {
              "role": "system",
              "content": "<p>You are an HTML formatter for Thermo Shape blog posts. Your task is to convert plain Croatian markdown into complete WordPress-ready HTML.</p><p>INPUT STRUCTURE:</p><p>- $flow.state.blog_post: Plain markdown (H1, H2 sections, paragraphs, signature, optional PS)</p><p>- $flow.state.banner_image: HTML img tag (ready to use)</p><p>- $flow.state.bottom_image: HTML img tag (ready to use)</p><p>OUTPUT REQUIREMENT:</p><p>Complete HTML structure ready to paste into WordPress Custom HTML block.</p><p>---</p><p>FORMATTING RULES:</p><p>OVERALL STRUCTURE:</p><p>The complete output must follow this wrapper hierarchy:</p><p>&lt;div class=\"ai-blogger\"&gt;</p><p>&lt;div class=\"ai-blog-header\"&gt;</p><p>&lt;h1&gt;Title&lt;/h1&gt;</p><p>&lt;/div&gt;</p><p>&lt;div class=\"banner-image\"&gt;</p><p>{banner image}</p><p>&lt;/div&gt;</p><p>&lt;div class=\"content\"&gt;</p><p>{intro paragraphs}</p><p>{all H2 sections}</p><p>{.content-with-image wrapper with last H2 + signature + bottom image}</p><p>{PS if present}</p><p>&lt;/div&gt;</p><p>&lt;/div&gt;</p><p>---</p><p>DETAILED FORMATTING:</p><p>1. OPEN AI-BLOGGER WRAPPER:</p><p>&lt;div class=\"ai-blogger\"&gt;</p><p>2. H1 TITLE IN HEADER:</p><p>&lt;div class=\"ai-blog-header\"&gt;</p><p>&lt;h1&gt;Title Text from markdown&lt;/h1&gt;</p><p>&lt;/div&gt;</p><p>3. BANNER IMAGE:</p><p>&lt;div class=\"banner-image\"&gt;{$flow.state.banner_image}&lt;/div&gt;</p><p>4. OPEN CONTENT WRAPPER:</p><p>&lt;div class=\"content\"&gt;</p><p>All remaining content (intro paragraphs, H2 sections, signature, PS) goes inside this div.</p><p>5. INTRO PARAGRAPHS:</p><p>All paragraphs before first H2 become individual &lt;p&gt; tags.</p><p>Keep the EXACT number of intro paragraphs from markdown.</p><p>Example:</p><p>&lt;p&gt;first intro paragraph&lt;/p&gt;</p><p>&lt;p&gt;second intro paragraph&lt;/p&gt;</p><p>&lt;p&gt;third intro paragraph&lt;/p&gt;</p><p>... (continue for all intro paragraphs present in markdown)</p><p>6. H2 SECTIONS (ALL EXCEPT LAST):</p><p>Format each section as:</p><p>&lt;h2&gt;&lt;i class=\"fas fa-{icon-name}\"&gt;&lt;/i&gt; Section Heading&lt;/h2&gt;</p><p>&lt;p&gt;first paragraph of this section&lt;/p&gt;</p><p>&lt;p&gt;second paragraph of this section&lt;/p&gt;</p><p>&lt;p&gt;third paragraph of this section&lt;/p&gt;</p><p>... (continue for ALL paragraphs in this section)</p><p>CRITICAL:</p><p>- Keep the EXACT number of paragraphs from markdown for each section</p><p>- Do NOT add or remove paragraphs</p><p>- Each section may have different paragraph counts</p><p>Icon selection logic:</p><p>- Choose Font Awesome icon that matches the H2 concept</p><p>- Examples: \"Tihi podaci\" → fa-bell-slash, boundaries → fa-shield, growth → fa-seedling, questions → fa-question-circle, morning → fa-sun, calm → fa-spa, change → fa-sync, rest → fa-bed, self-care → fa-heart, mindfulness → fa-brain, home → fa-home</p><p>- Think conceptually, not literally</p><p>- Use \"fas\" prefix (solid icons)</p><p>7. LAST H2 SECTION + SIGNATURE + BOTTOM IMAGE:</p><p>Wrap in .content-with-image structure:</p><p>&lt;div class=\"content-with-image\"&gt;</p><p>&lt;div class=\"text\"&gt;</p><p>&lt;h2&gt;&lt;i class=\"fas fa-{icon}\"&gt;&lt;/i&gt; Last Section Heading&lt;/h2&gt;</p><p>&lt;p&gt;first paragraph&lt;/p&gt;</p><p>&lt;p&gt;second paragraph&lt;/p&gt;</p><p>... (ALL paragraphs from last H2 section)</p><p>&lt;p class=\"signature\"&gt;S ljubavlju, Ari &lt;i class=\"fas fa-heart\"&gt;&lt;/i&gt;&lt;/p&gt;</p><p>&lt;/div&gt;</p><p>&lt;div class=\"image\"&gt;</p><p>{$flow.state.bottom_image}</p><p>&lt;/div&gt;</p><p>&lt;/div&gt;</p><p>CRITICAL:</p><p>- The signature line ALWAYS goes inside the .text div, right after the last H2 section's paragraphs</p><p>- Keep EXACT number of paragraphs from the last H2 section in markdown</p><p>- The bottom image goes in the .image div</p><p>- Use the bottom image ONLY ONCE - inside this .image div</p><p>8. PS SECTION (if present in markdown):</p><p>If PS exists, format as:</p><p>&lt;p class=\"product-mention\"&gt;PS: {exact PS content}&lt;/p&gt;</p><p>Place after the .content-with-image div, still inside the .content wrapper.</p><p>9. CLOSE CONTENT WRAPPER:</p><p>&lt;/div&gt;</p><p>10. CLOSE AI-BLOGGER WRAPPER:</p><p>&lt;/div&gt;</p><p>---</p><p>CRITICAL REQUIREMENTS:</p><p>- Follow the exact wrapper structure: ai-blogger &gt; (ai-blog-header, banner-image, content)</p><p>- The .content div contains: intro paragraphs, all H2 sections, .content-with-image wrapper, and PS if present</p><p>- Preserve ALL Croatian text exactly as written</p><p>- Keep EXACT paragraph count from markdown (do not add or remove)</p><p>- Each paragraph in markdown = one &lt;p&gt; tag in HTML</p><p>- NO additional commentary or meta-text in output</p><p>- NO markdown formatting (no **, no ##, no backticks)</p><p>- Pure HTML only</p><p>- Use CSS classes, NO inline styles</p><p>- Keep signature format exact: \"S ljubavlju, Ari ❤️\" with &lt;i class=\"fas fa-heart\"&gt;&lt;/i&gt; and &lt;br&gt; tag between coma and Ari</p><p>---</p><p>DETECTION LOGIC:</p><p>From the markdown input:</p><p>1. Extract H1 title (first line starting with #)</p><p>2. Identify intro paragraphs (all paragraphs before first H2)</p><p>3. Identify all H2 sections (lines starting with ##)</p><p>4. Count paragraphs in each section</p><p>5. Separate last H2 section from others</p><p>6. Locate signature line (contains \"S ljubavlju, Ari\")</p><p>7. Check if PS exists after signature (starts with \"PS:\" or \"P.S.\")</p><p>---</p><p>OUTPUT FORMAT:</p><p>Plain HTML code only.</p><p>No explanation before or after.</p><p>No preamble.</p><p>No markdown code blocks.</p><p>Just the raw HTML.</p><p>The output should be ready to copy-paste directly into WordPress Custom HTML block.</p>"
            },
            {
              "role": "user",
              "content": "<p>Format this blog post into complete WordPress-ready HTML:</p><p>Blog Post (markdown):</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.blog_post\" data-label=\"$flow.state.blog_post\">{{ $flow.state.blog_post }}</span></p><p>Banner Image (HTML):</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.banner_image\" data-label=\"$flow.state.banner_image\">{{ $flow.state.banner_image }}</span></p><p>Bottom Image (HTML):</p><p><span class=\"variable\" data-type=\"mention\" data-id=\"$flow.state.bottom_image\" data-label=\"$flow.state.bottom_image\">{{ $flow.state.bottom_image }}</span></p><p>Output the complete HTML structure.</p>"
            }
          ],
          "llmEnableMemory": false,
          "llmReturnResponseAs": "assistantMessage",
          "llmStructuredOutput": "",
          "llmUpdateState": [
            {
              "key": "final_post",
              "value": "<p><span class=\"variable\" data-type=\"mention\" data-id=\"output\" data-label=\"output\">{{ output }}</span> </p>"
            }
          ],
          "llmModelConfig": {
            "cache": "",
            "modelName": "gpt-5",
            "temperature": "0.1",
            "streaming": true,
            "maxTokens": "",
            "topP": "",
            "frequencyPenalty": "",
            "presencePenalty": "",
            "timeout": "",
            "strictToolCalling": "",
            "stopSequence": "",
            "basepath": "",
            "proxyUrl": "",
            "baseOptions": "",
            "allowImageUploads": "",
            "reasoning": "",
            "llmModel": "chatOpenAI"
          }
        },
        "outputAnchors": [
          {
            "id": "llmAgentflow_6-output-llmAgentflow",
            "label": "LLM",
            "name": "llmAgentflow"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "type": "agentFlow",
      "width": 183,
      "height": 72,
      "selected": false,
      "positionAbsolute": {
        "x": 1690.0458469946755,
        "y": 398.06598336167997
      },
      "dragging": false
    }
  ],
  "edges": [
    {
      "source": "startAgentflow_0",
      "sourceHandle": "startAgentflow_0-output-startAgentflow",
      "target": "agentAgentflow_0",
      "targetHandle": "agentAgentflow_0",
      "data": {
        "sourceColor": "#7EE787",
        "targetColor": "#4DD0E1",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "startAgentflow_0-startAgentflow_0-output-startAgentflow-agentAgentflow_0-agentAgentflow_0"
    },
    {
      "source": "agentAgentflow_0",
      "sourceHandle": "agentAgentflow_0-output-agentAgentflow",
      "target": "llmAgentflow_0",
      "targetHandle": "llmAgentflow_0",
      "data": {
        "sourceColor": "#4DD0E1",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "agentAgentflow_0-agentAgentflow_0-output-agentAgentflow-llmAgentflow_0-llmAgentflow_0"
    },
    {
      "source": "humanInputAgentflow_0",
      "sourceHandle": "humanInputAgentflow_0-output-1",
      "target": "loopAgentflow_0",
      "targetHandle": "loopAgentflow_0",
      "data": {
        "sourceColor": "#6E6EFD",
        "targetColor": "#FFA07A",
        "edgeLabel": "reject",
        "isHumanInput": true
      },
      "type": "agentFlow",
      "id": "humanInputAgentflow_0-humanInputAgentflow_0-output-1-loopAgentflow_0-loopAgentflow_0"
    },
    {
      "source": "llmAgentflow_2",
      "sourceHandle": "llmAgentflow_2-output-llmAgentflow",
      "target": "humanInputAgentflow_0",
      "targetHandle": "humanInputAgentflow_0",
      "data": {
        "sourceColor": "#64B5F6",
        "targetColor": "#6E6EFD",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "llmAgentflow_2-llmAgentflow_2-output-llmAgentflow-humanInputAgentflow_0-humanInputAgentflow_0"
    },
    {
      "source": "llmAgentflow_0",
      "sourceHandle": "llmAgentflow_0-output-llmAgentflow",
      "target": "llmAgentflow_2",
      "targetHandle": "llmAgentflow_2",
      "data": {
        "sourceColor": "#64B5F6",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "llmAgentflow_0-llmAgentflow_0-output-llmAgentflow-llmAgentflow_2-llmAgentflow_2"
    },
    {
      "source": "humanInputAgentflow_0",
      "sourceHandle": "humanInputAgentflow_0-output-0",
      "target": "customFunctionAgentflow_0",
      "targetHandle": "customFunctionAgentflow_0",
      "data": {
        "sourceColor": "#6E6EFD",
        "targetColor": "#E4B7FF",
        "edgeLabel": "proceed",
        "isHumanInput": true
      },
      "type": "agentFlow",
      "id": "humanInputAgentflow_0-humanInputAgentflow_0-output-0-customFunctionAgentflow_0-customFunctionAgentflow_0"
    },
    {
      "source": "llmAgentflow_1",
      "sourceHandle": "llmAgentflow_1-output-llmAgentflow",
      "target": "llmAgentflow_3",
      "targetHandle": "llmAgentflow_3",
      "data": {
        "sourceColor": "#64B5F6",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "llmAgentflow_1-llmAgentflow_1-output-llmAgentflow-llmAgentflow_3-llmAgentflow_3",
      "selected": false
    },
    {
      "source": "llmAgentflow_3",
      "sourceHandle": "llmAgentflow_3-output-llmAgentflow",
      "target": "llmAgentflow_4",
      "targetHandle": "llmAgentflow_4",
      "data": {
        "sourceColor": "#64B5F6",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "llmAgentflow_3-llmAgentflow_3-output-llmAgentflow-llmAgentflow_4-llmAgentflow_4"
    },
    {
      "source": "llmAgentflow_4",
      "sourceHandle": "llmAgentflow_4-output-llmAgentflow",
      "target": "llmAgentflow_5",
      "targetHandle": "llmAgentflow_5",
      "data": {
        "sourceColor": "#64B5F6",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "llmAgentflow_4-llmAgentflow_4-output-llmAgentflow-llmAgentflow_5-llmAgentflow_5"
    },
    {
      "source": "agentAgentflow_1",
      "sourceHandle": "agentAgentflow_1-output-agentAgentflow",
      "target": "llmAgentflow_1",
      "targetHandle": "llmAgentflow_1",
      "data": {
        "sourceColor": "#4DD0E1",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "agentAgentflow_1-agentAgentflow_1-output-agentAgentflow-llmAgentflow_1-llmAgentflow_1"
    },
    {
      "source": "humanInputAgentflow_1",
      "sourceHandle": "humanInputAgentflow_1-output-0",
      "target": "agentAgentflow_2",
      "targetHandle": "agentAgentflow_2",
      "data": {
        "sourceColor": "#6E6EFD",
        "targetColor": "#4DD0E1",
        "edgeLabel": "proceed",
        "isHumanInput": true
      },
      "type": "agentFlow",
      "id": "humanInputAgentflow_1-humanInputAgentflow_1-output-0-agentAgentflow_2-agentAgentflow_2"
    },
    {
      "source": "llmAgentflow_5",
      "sourceHandle": "llmAgentflow_5-output-llmAgentflow",
      "target": "llmAgentflow_7",
      "targetHandle": "llmAgentflow_7",
      "data": {
        "sourceColor": "#64B5F6",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "llmAgentflow_5-llmAgentflow_5-output-llmAgentflow-llmAgentflow_7-llmAgentflow_7"
    },
    {
      "source": "llmAgentflow_7",
      "sourceHandle": "llmAgentflow_7-output-llmAgentflow",
      "target": "humanInputAgentflow_1",
      "targetHandle": "humanInputAgentflow_1",
      "data": {
        "sourceColor": "#64B5F6",
        "targetColor": "#6E6EFD",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "llmAgentflow_7-llmAgentflow_7-output-llmAgentflow-humanInputAgentflow_1-humanInputAgentflow_1"
    },
    {
      "source": "humanInputAgentflow_1",
      "sourceHandle": "humanInputAgentflow_1-output-1",
      "target": "customFunctionAgentflow_1",
      "targetHandle": "customFunctionAgentflow_1",
      "data": {
        "sourceColor": "#6E6EFD",
        "targetColor": "#E4B7FF",
        "edgeLabel": "reject",
        "isHumanInput": true
      },
      "type": "agentFlow",
      "id": "humanInputAgentflow_1-humanInputAgentflow_1-output-1-customFunctionAgentflow_1-customFunctionAgentflow_1"
    },
    {
      "source": "customFunctionAgentflow_1",
      "sourceHandle": "customFunctionAgentflow_1-output-customFunctionAgentflow",
      "target": "loopAgentflow_1",
      "targetHandle": "loopAgentflow_1",
      "data": {
        "sourceColor": "#E4B7FF",
        "targetColor": "#FFA07A",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "customFunctionAgentflow_1-customFunctionAgentflow_1-output-customFunctionAgentflow-loopAgentflow_1-loopAgentflow_1"
    },
    {
      "source": "customFunctionAgentflow_0",
      "sourceHandle": "customFunctionAgentflow_0-output-customFunctionAgentflow",
      "target": "customFunctionAgentflow_2",
      "targetHandle": "customFunctionAgentflow_2",
      "data": {
        "sourceColor": "#E4B7FF",
        "targetColor": "#E4B7FF",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "customFunctionAgentflow_0-customFunctionAgentflow_0-output-customFunctionAgentflow-customFunctionAgentflow_2-customFunctionAgentflow_2"
    },
    {
      "source": "customFunctionAgentflow_2",
      "sourceHandle": "customFunctionAgentflow_2-output-customFunctionAgentflow",
      "target": "agentAgentflow_1",
      "targetHandle": "agentAgentflow_1",
      "data": {
        "sourceColor": "#E4B7FF",
        "targetColor": "#4DD0E1",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "customFunctionAgentflow_2-customFunctionAgentflow_2-output-customFunctionAgentflow-agentAgentflow_1-agentAgentflow_1"
    },
    {
      "source": "agentAgentflow_2",
      "sourceHandle": "agentAgentflow_2-output-agentAgentflow",
      "target": "llmAgentflow_6",
      "targetHandle": "llmAgentflow_6",
      "data": {
        "sourceColor": "#4DD0E1",
        "targetColor": "#64B5F6",
        "isHumanInput": false
      },
      "type": "agentFlow",
      "id": "agentAgentflow_2-agentAgentflow_2-output-agentAgentflow-llmAgentflow_6-llmAgentflow_6"
    }
  ]
}